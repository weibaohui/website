<!DOCTYPE html>
<html>
  <head>
    <title>Gin Web Framework</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.52-DEV" />
<title>中文文档 :: Gin Web Framework</title>
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/gin-gonic.com\/";
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/footer.css">
<link rel="stylesheet" href="/css/content.css">
<link rel="stylesheet" href="/css/buttons.css">
<link rel="stylesheet" href="/css/feature-matrix.css">

<style>
  .shortcuts {
    height: initial;
    line-height: initial;
  }

  .nav i {
    height: initial;
  }

  .tabs-body pre {
    margin-top: 0;
  }

  ul:not(.browser-default) {
    padding-left: 22.5px;
    padding-right: 22.5px;
  }

  ul:not(.browser-default),
  ul:not(.browser-default) > li {
    list-style-type: initial;
  }

  ul.menu,
  ul.menu ul {
    padding: 0;
  }

  .hide {
    display: none;
  }

  .menu *,
  .menu a,
  a {
    color: #242A31;
  }

  .menu .dd-item.haschildren > div > a.highlight,
  .menu > .dd-item > div > a.highlight {
    color: #242A31;
  }

  .menu .dd-item a.highlight {
    color: #9DAAB6;
  }

  .menu .dd-item.active > div > a.highlight {
    color: #BF2A32;
  }

  section a {
    color: #039be5;
  }
</style>


    
  </head>
  <body data-url="/cn/">
    
      <header>
  <div class="logo">
    
	
  
    <p><a href="/"><img src="https://opencensus.io/img/logo-sm.svg" alt="Gin Logo" /> <span>G</span>in</a></p>

  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
  <div class="header-survey">
    <a class="survey-button btn btn-light" target="_blank" href="https://github.com/gin-gonic/gin/">GitHub repo</a>
  </div>
</header>
<article>
  <aside>
    <ul class="menu">
    <li data-nav-id="/introduction/" class="dd-item
        ">
      <div>
      <a href="/introduction/">Introduction</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/quickstart/" class="dd-item
        ">
      <div>
      <a href="/quickstart/">Quickstart</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/benchmarks/" class="dd-item
        ">
      <div>
      <a href="/benchmarks/">Benchmarks</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/features/" class="dd-item
        ">
      <div>
      <a href="/features/">Features</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/jsoniter/" class="dd-item
        ">
      <div>
      <a href="/jsoniter/">Jsoniter</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/api-example/" class="dd-item haschildren
        ">
      <div>
      <a href="/api-example/">API Example</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/api-example/ascii-json/" class="dd-item">
        <div>
          <a href="/api-example/ascii-json/">
            AsciiJSON
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/bind-uri/" class="dd-item">
        <div>
          <a href="/api-example/bind-uri/">
            Bind Uri
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/bind-form-data-request-with-custom-struct/" class="dd-item">
        <div>
          <a href="/api-example/bind-form-data-request-with-custom-struct/">
            Bind form-data request with custom struct
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/bind-html-checkbox/" class="dd-item">
        <div>
          <a href="/api-example/bind-html-checkbox/">
            Bind html checkboxes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/bind-query-or-post/" class="dd-item">
        <div>
          <a href="/api-example/bind-query-or-post/">
            Bind query string or post data
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/bind-single-binary-with-template/" class="dd-item">
        <div>
          <a href="/api-example/bind-single-binary-with-template/">
            Build a single binary with templates
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/custom-http-config/" class="dd-item">
        <div>
          <a href="/api-example/custom-http-config/">
            Custom HTTP configuration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/custom-middleware/" class="dd-item">
        <div>
          <a href="/api-example/custom-middleware/">
            Custom Middleware
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/custom-validators/" class="dd-item">
        <div>
          <a href="/api-example/custom-validators/">
            Custom validators
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/define-format-for-the-log-of-routes/" class="dd-item">
        <div>
          <a href="/api-example/define-format-for-the-log-of-routes/">
            Define format for the log of routes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/goroutines-inside-a-middleware/" class="dd-item">
        <div>
          <a href="/api-example/goroutines-inside-a-middleware/">
            Goroutines inside a middleware
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/graceful-restart-or-stop/" class="dd-item">
        <div>
          <a href="/api-example/graceful-restart-or-stop/">
            Graceful restart or stop
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/grouping-routes/" class="dd-item">
        <div>
          <a href="/api-example/grouping-routes/">
            Grouping routes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/html-rendering/" class="dd-item">
        <div>
          <a href="/api-example/html-rendering/">
            HTML rendering
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/http2-server-push/" class="dd-item">
        <div>
          <a href="/api-example/http2-server-push/">
            HTTP2 server push
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/write-log/" class="dd-item">
        <div>
          <a href="/api-example/write-log/">
            How to write log file
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/jsonp/" class="dd-item">
        <div>
          <a href="/api-example/jsonp/">
            JSONP
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/map-as-querystring-or-postform/" class="dd-item">
        <div>
          <a href="/api-example/map-as-querystring-or-postform/">
            Map as querystring or postform parameters
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/binding-and-validation/" class="dd-item">
        <div>
          <a href="/api-example/binding-and-validation/">
            Model binding and validation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/multipart-urlencoded-binding/" class="dd-item">
        <div>
          <a href="/api-example/multipart-urlencoded-binding/">
            Multipart/Urlencoded binding
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/multipart-urlencoded-form/" class="dd-item">
        <div>
          <a href="/api-example/multipart-urlencoded-form/">
            Multipart/Urlencoded form
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/multiple-template/" class="dd-item">
        <div>
          <a href="/api-example/multiple-template/">
            Multitemplate
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/only-bind-query-string/" class="dd-item">
        <div>
          <a href="/api-example/only-bind-query-string/">
            Only bind query string
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/param-in-path/" class="dd-item">
        <div>
          <a href="/api-example/param-in-path/">
            Parameters in path
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/pure-json/" class="dd-item">
        <div>
          <a href="/api-example/pure-json/">
            PureJSON
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/query-and-post-form/" class="dd-item">
        <div>
          <a href="/api-example/query-and-post-form/">
            Query and post form
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/querystring-param/" class="dd-item">
        <div>
          <a href="/api-example/querystring-param/">
            Query string parameters
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/redirects/" class="dd-item">
        <div>
          <a href="/api-example/redirects/">
            Redirects
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/run-multiple-service/" class="dd-item">
        <div>
          <a href="/api-example/run-multiple-service/">
            Run multiple service
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/secure-json/" class="dd-item">
        <div>
          <a href="/api-example/secure-json/">
            SecureJSON
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/serving-data-from-reader/" class="dd-item">
        <div>
          <a href="/api-example/serving-data-from-reader/">
            Serving data from reader
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/serving-static-files/" class="dd-item">
        <div>
          <a href="/api-example/serving-static-files/">
            Serving static files
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/cookie/" class="dd-item">
        <div>
          <a href="/api-example/cookie/">
            Set and get a cookie
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/support-lets-encrypt/" class="dd-item">
        <div>
          <a href="/api-example/support-lets-encrypt/">
            Support Let&#39;s Encrypt
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/bind-body-into-dirrerent-structs/" class="dd-item">
        <div>
          <a href="/api-example/bind-body-into-dirrerent-structs/">
            Try to bind body into different structs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/api-example/upload-file/" class="dd-item haschildren
        ">
      <div>
      <a href="/api-example/upload-file/">Upload files</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/api-example/upload-file/multiple-file/" class="dd-item">
        <div>
          <a href="/api-example/upload-file/multiple-file/">
            Multiple files
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/upload-file/single-file/" class="dd-item">
        <div>
          <a href="/api-example/upload-file/single-file/">
            Single file
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/api-example/using-basicauth-middleware/" class="dd-item">
        <div>
          <a href="/api-example/using-basicauth-middleware/">
            Using BasicAuth middleware
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/http-method/" class="dd-item">
        <div>
          <a href="/api-example/http-method/">
            Using HTTP method
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/using-middleware/" class="dd-item">
        <div>
          <a href="/api-example/using-middleware/">
            Using middleware
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/without-middleware/" class="dd-item">
        <div>
          <a href="/api-example/without-middleware/">
            Without middleware by default
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/api-example/rendering/" class="dd-item">
        <div>
          <a href="/api-example/rendering/">
            XML/JSON/YAML/ProtoBuf rendering
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/testing/" class="dd-item
        ">
      <div>
      <a href="/testing/">Testing</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/users/" class="dd-item
        ">
      <div>
      <a href="/users/">Users</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/faq/" class="dd-item
        ">
      <div>
      <a href="/faq/">FAQ</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/cn/" class="dd-item parent active
        ">
      <div>
      <a href="/cn/">中文文档</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page ">
    <div class="mobile-survey">
      <a class="btn btn-light survey-button" target="_blank" href="https://github.com/gin-gonic/gin/">GitHub repo</a>
    </div>
    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/introduction/" >
   Introduction</option>
    <option value="/quickstart/" >
   Quickstart</option>
    <option value="/benchmarks/" >
   Benchmarks</option>
    <option value="/features/" >
   Features</option>
    <option value="/jsoniter/" >
   Jsoniter</option>
    <option value="/api-example/" >
   API Example</option>
    <option value="/testing/" >
   Testing</option>
    <option value="/users/" >
   Users</option>
    <option value="/faq/" >
   FAQ</option>
    <option value="/cn/"  selected>
   中文文档</option> 
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/gin-gonic.com\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>


    
      <div class="header-container">
        <h1>中文文档</h1>
        
      </div>
    

    
    
    



<p><img align="right" width="159px" src="https://raw.githubusercontent.com/gin-gonic/logo/master/color.png"></p>

<p>Gin 是一个 Go (Golang) 语言框架。 它是一个拥有更好性能的 martini-like API 框架, 比 <a href="https://github.com/julienschmidt/httprouter">httprouter</a> 的速度快了40倍. 如果你是性能和高效的追求者, 那么你会爱上 Gin.</p>

<h2 id="contents">Contents</h2>

<ul>
<li><a href="#安装">安装</a></li>
<li><a href="#前提条件">前提条件</a></li>
<li><a href="#快速启动">快速启动</a></li>
<li><a href="#性能测试">性能测试</a></li>
<li><a href="#gin-v1-稳定版">Gin v1 稳定版</a></li>
<li><a href="#使用-jsoniter-构建">使用 jsoniter 构建</a></li>
<li><a href="#api-示例">API 示例</a>

<ul>
<li><a href="#get-post-put-patch-delete-options-使用">GET,POST,PUT,PATCH,DELETE,OPTIONS 使用</a></li>
<li><a href="#获取路由参数">获取路由参数</a></li>
<li><a href="#获取url查询参数">获取url查询参数</a></li>
<li><a href="#multipart-urlencoded-表单">Multipart Urlencoded 表单</a></li>
<li><a href="#获取post表单数据（url带查询参数）">获取post表单数据（url带查询参数）</a></li>
<li><a href="#映射参数-表单参数">映射参数 表单参数</a></li>
<li><a href="#上传文件">上传文件</a></li>
<li><a href="#路由组">路由组</a></li>
<li><a href="#默认初始化-gin">默认初始化 Gin</a></li>
<li><a href="#使用中间件">使用中间件</a></li>
<li><a href="#如何记录日志">如何记录日志</a></li>
<li><a href="#模型绑定和验证">模型绑定和验证</a></li>
<li><a href="#自定义验证器">自定义验证器</a></li>
<li><a href="#只绑定url查询参数">只绑定url查询参数</a></li>
<li><a href="#url查询参数绑定到struct（或POST表单数据）">url查询参数绑定到struct（或POST表单数据）</a></li>
<li><a href="#绑定-html-复选框">绑定 HTML 复选框</a></li>
<li><a href="#multipart-urlencoded-绑定">Multipart Urlencoded 绑定</a></li>
<li><a href="#xml-json-yaml-protobuf-渲染">XML JSON YAML ProtoBuf 渲染</a></li>
<li><a href="#SecureJSON">SecureJSON</a></li>
<li><a href="#静态文件服务">静态文件服务</a></li>
<li><a href="#从读者服务数据">从读者服务数据</a></li>
<li><a href="#html-渲染">HTML 渲染</a></li>
<li><a href="#多模板">多模板</a></li>
<li><a href="#重定向">重定向</a></li>
<li><a href="#自定义中间件">自定义中间件</a></li>
<li><a href="#使用-basicauth()-中间件">使用 BasicAuth() 中间件</a></li>
<li><a href="#goroutines">Goroutines</a></li>
<li><a href="#自定义-http-配置">自定义 HTTP 配置</a></li>
<li><a href="#lets-encrypt-支持">Let&rsquo;s Encrypt 支持</a></li>
<li><a href="使用-gin-运行多个服务">使用 Gin 运行多个服务</a></li>
<li><a href="#优雅重启或停止">优雅重启或停止</a></li>
<li><a href="#使用模板构建单个二进制文件">使用模板构建单个二进制文件</a></li>
<li><a href="#表单数据绑定到自定义结构体">表单数据绑定到自定义结构体</a></li>
<li><a href="#将request body绑定到不同的结构体中">将request body绑定到不同的结构体中</a></li>
<li><a href="#http2-server-推送">http2 server 推送</a></li>
<li><a href="#定义路由日志的格式">定义路由日志的格式</a></li>
</ul></li>
<li><a href="#测试">测试</a></li>
<li><a href="#用户">用户</a></li>
</ul>

<h2 id="安装">安装</h2>

<p>要安装 Gin 软件包，需要先安装 Go 并设置 Go 工作区。</p>

<ol>
<li>下载并安装 gin:</li>
</ol>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go get -u github.com/gin-gonic/gin</code></pre></div>
<ol>
<li>将 gin 引入到代码中:</li>
</ol>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span></code></pre></div>
<ol>
<li>（可选）如果使用诸如<code>http.StatusOK</code>之类的常量，则需要引入 <code>net/http</code> 包。</li>
</ol>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#d88200">&#34;net/http&#34;</span></code></pre></div>
<h3 id="使用-govendor-https-github-com-kardianos-govendor-工具创建项目">使用 <a href="https://github.com/kardianos/govendor">Govendor</a> 工具创建项目</h3>

<ol>
<li><code>go get</code> govendor</li>
</ol>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go get github.com/kardianos/govendor</code></pre></div>
<p>2.创建项目并且 <code>cd</code> 到项目目录中</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ mkdir -p <span style="color:#111">$GOPATH</span>/src/github.com/myusername/project <span style="color:#f92672">&amp;&amp;</span> <span style="color:#111">cd</span> <span style="color:#d88200">&#34;</span><span style="color:#111">$_</span><span style="color:#d88200">&#34;</span></code></pre></div>
<ol>
<li>使用 govendor 初始化项目,并且引入gin</li>
</ol>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ govendor init
$ govendor fetch github.com/gin-gonic/gin@v1.3</code></pre></div>
<ol>
<li>复制启动文件模板到项目目录中</li>
</ol>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl https://raw.githubusercontent.com/gin-gonic/gin/master/examples/basic/main.go &gt; main.go</code></pre></div>
<p>5.启动项目</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go run main.go</code></pre></div>
<h2 id="前提条件">前提条件</h2>

<p>新版本的 Gin 需要 Go 1.6 或者更高版本，并且很快就会升级到 Go 1.7.</p>

<h2 id="快速启动">快速启动</h2>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e"># assume the following codes in example.go file</span>
$ cat example.go</code></pre></div><div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/ping&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;pong&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">()</span> <span style="color:#75715e">// listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span><span style="color:#111">}</span></code></pre></div>
<pre><code># run example.go and visit 0.0.0.0:8080/ping on browser
$ go run example.go
</code></pre>

<h2 id="性能测试">性能测试</h2>

<p>Gin 使用自定义版本的 <a href="https://github.com/julienschmidt/httprouter">HttpRouter</a></p>

<p><a href="/BENCHMARKS.md">所有性能测试</a></p>

<table>
<thead>
<tr>
<th>Benchmark name</th>
<th align="right">(1)</th>
<th align="right">(2)</th>
<th align="right">(3)</th>
<th align="right">(4)</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong>BenchmarkGin_GithubAll</strong></td>
<td align="right"><strong>30000</strong></td>
<td align="right"><strong>48375</strong></td>
<td align="right"><strong>0</strong></td>
<td align="right"><strong>0</strong></td>
</tr>

<tr>
<td>BenchmarkAce_GithubAll</td>
<td align="right">10000</td>
<td align="right">134059</td>
<td align="right">13792</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkBear_GithubAll</td>
<td align="right">5000</td>
<td align="right">534445</td>
<td align="right">86448</td>
<td align="right">943</td>
</tr>

<tr>
<td>BenchmarkBeego_GithubAll</td>
<td align="right">3000</td>
<td align="right">592444</td>
<td align="right">74705</td>
<td align="right">812</td>
</tr>

<tr>
<td>BenchmarkBone_GithubAll</td>
<td align="right">200</td>
<td align="right">6957308</td>
<td align="right">698784</td>
<td align="right">8453</td>
</tr>

<tr>
<td>BenchmarkDenco_GithubAll</td>
<td align="right">10000</td>
<td align="right">158819</td>
<td align="right">20224</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkEcho_GithubAll</td>
<td align="right">10000</td>
<td align="right">154700</td>
<td align="right">6496</td>
<td align="right">203</td>
</tr>

<tr>
<td>BenchmarkGocraftWeb_GithubAll</td>
<td align="right">3000</td>
<td align="right">570806</td>
<td align="right">131656</td>
<td align="right">1686</td>
</tr>

<tr>
<td>BenchmarkGoji_GithubAll</td>
<td align="right">2000</td>
<td align="right">818034</td>
<td align="right">56112</td>
<td align="right">334</td>
</tr>

<tr>
<td>BenchmarkGojiv2_GithubAll</td>
<td align="right">2000</td>
<td align="right">1213973</td>
<td align="right">274768</td>
<td align="right">3712</td>
</tr>

<tr>
<td>BenchmarkGoJsonRest_GithubAll</td>
<td align="right">2000</td>
<td align="right">785796</td>
<td align="right">134371</td>
<td align="right">2737</td>
</tr>

<tr>
<td>BenchmarkGoRestful_GithubAll</td>
<td align="right">300</td>
<td align="right">5238188</td>
<td align="right">689672</td>
<td align="right">4519</td>
</tr>

<tr>
<td>BenchmarkGorillaMux_GithubAll</td>
<td align="right">100</td>
<td align="right">10257726</td>
<td align="right">211840</td>
<td align="right">2272</td>
</tr>

<tr>
<td>BenchmarkHttpRouter_GithubAll</td>
<td align="right">20000</td>
<td align="right">105414</td>
<td align="right">13792</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkHttpTreeMux_GithubAll</td>
<td align="right">10000</td>
<td align="right">319934</td>
<td align="right">65856</td>
<td align="right">671</td>
</tr>

<tr>
<td>BenchmarkKocha_GithubAll</td>
<td align="right">10000</td>
<td align="right">209442</td>
<td align="right">23304</td>
<td align="right">843</td>
</tr>

<tr>
<td>BenchmarkLARS_GithubAll</td>
<td align="right">20000</td>
<td align="right">62565</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>

<tr>
<td>BenchmarkMacaron_GithubAll</td>
<td align="right">2000</td>
<td align="right">1161270</td>
<td align="right">204194</td>
<td align="right">2000</td>
</tr>

<tr>
<td>BenchmarkMartini_GithubAll</td>
<td align="right">200</td>
<td align="right">9991713</td>
<td align="right">226549</td>
<td align="right">2325</td>
</tr>

<tr>
<td>BenchmarkPat_GithubAll</td>
<td align="right">200</td>
<td align="right">5590793</td>
<td align="right">1499568</td>
<td align="right">27435</td>
</tr>

<tr>
<td>BenchmarkPossum_GithubAll</td>
<td align="right">10000</td>
<td align="right">319768</td>
<td align="right">84448</td>
<td align="right">609</td>
</tr>

<tr>
<td>BenchmarkR2router_GithubAll</td>
<td align="right">10000</td>
<td align="right">305134</td>
<td align="right">77328</td>
<td align="right">979</td>
</tr>

<tr>
<td>BenchmarkRivet_GithubAll</td>
<td align="right">10000</td>
<td align="right">132134</td>
<td align="right">16272</td>
<td align="right">167</td>
</tr>

<tr>
<td>BenchmarkTango_GithubAll</td>
<td align="right">3000</td>
<td align="right">552754</td>
<td align="right">63826</td>
<td align="right">1618</td>
</tr>

<tr>
<td>BenchmarkTigerTonic_GithubAll</td>
<td align="right">1000</td>
<td align="right">1439483</td>
<td align="right">239104</td>
<td align="right">5374</td>
</tr>

<tr>
<td>BenchmarkTraffic_GithubAll</td>
<td align="right">100</td>
<td align="right">11383067</td>
<td align="right">2659329</td>
<td align="right">21848</td>
</tr>

<tr>
<td>BenchmarkVulcan_GithubAll</td>
<td align="right">5000</td>
<td align="right">394253</td>
<td align="right">19894</td>
<td align="right">609</td>
</tr>
</tbody>
</table>

<ul>
<li>(1): 在不断的时间内实现总重复，更高意味着更自信的结果</li>
<li>(2): 单次重复持续时间（ns / op），越低越好</li>
<li>(3): 堆内存（B / op），越低越好</li>
<li>(4): 每次重复的平均分配（allocs / op）越低越好</li>
</ul>

<h2 id="gin-v1-稳定版">Gin v1 稳定版</h2>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> 零分配路由器。</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> 仍然是最快的http路由器和框架。</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> 完整的单元测试套件</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> 对战测试</label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> API冻结，新版本不会破坏您的代码。</label></li>
</ul>

<h2 id="使用-jsoniter-https-github-com-json-iterator-go-构建">使用 <a href="https://github.com/json-iterator/go">jsoniter</a> 构建</h2>

<p>Gin使用<code>encoding/json</code>作为默认的json包，但您可以通过其他标签的构建更改为<a href="https://github.com/json-iterator/go">jsoniter</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ go build -tags<span style="color:#f92672">=</span>jsoniter .</code></pre></div>
<h2 id="api-示例">API 示例</h2>

<h3 id="get-post-put-patch-delete-options-使用">GET, POST, PUT, PATCH, DELETE , OPTIONS 使用</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75715e">// Disable Console Color
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// gin.DisableConsoleColor()
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">// Creates a gin router with default middleware:
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// logger and recovery (crash-free) middleware
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someGet&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">getting</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/somePost&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">posting</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">PUT</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/somePut&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">putting</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">DELETE</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someDelete&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">deleting</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">PATCH</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/somePatch&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">patching</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">HEAD</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someHead&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">head</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">OPTIONS</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someOptions&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">options</span><span style="color:#111">)</span>

	<span style="color:#75715e">// By default it serves on :8080 unless a
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// PORT environment variable was defined.
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">()</span>
	<span style="color:#75715e">// router.Run(&#34;:3000&#34;) for a hard coded port
</span><span style="color:#75715e"></span><span style="color:#111">}</span></code></pre></div>
<h3 id="获取路由参数">获取路由参数</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// This handler will match /user/john but will not match /user/ or /user
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/user/:name&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">name</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Param</span><span style="color:#111">(</span><span style="color:#d88200">&#34;name&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Hello %s&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">name</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// However, this one will match /user/john/ and also /user/john/send
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// If no other routers match /user/john, it will redirect to /user/john/
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/user/:name/*action&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">name</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Param</span><span style="color:#111">(</span><span style="color:#d88200">&#34;name&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">action</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Param</span><span style="color:#111">(</span><span style="color:#d88200">&#34;action&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">message</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">name</span> <span style="color:#f92672">+</span> <span style="color:#d88200">&#34; is &#34;</span> <span style="color:#f92672">+</span> <span style="color:#75af00">action</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">message</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="获取url查询参数">获取url查询参数</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Query string parameters are parsed using the existing underlying request object.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// The request responds to a url matching:  /welcome?firstname=Jane&amp;lastname=Doe
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/welcome&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">firstname</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">DefaultQuery</span><span style="color:#111">(</span><span style="color:#d88200">&#34;firstname&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Guest&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">lastname</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Query</span><span style="color:#111">(</span><span style="color:#d88200">&#34;lastname&#34;</span><span style="color:#111">)</span> <span style="color:#75715e">// shortcut for c.Request.URL.Query().Get(&#34;lastname&#34;)
</span><span style="color:#75715e"></span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Hello %s %s&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">firstname</span><span style="color:#111">,</span> <span style="color:#75af00">lastname</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="multipart-urlencoded-表单">Multipart Urlencoded 表单</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/form_post&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">message</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">PostForm</span><span style="color:#111">(</span><span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">nick</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">DefaultPostForm</span><span style="color:#111">(</span><span style="color:#d88200">&#34;nick&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;anonymous&#34;</span><span style="color:#111">)</span>

		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span>  <span style="color:#d88200">&#34;posted&#34;</span><span style="color:#111">,</span>
			<span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">message</span><span style="color:#111">,</span>
			<span style="color:#d88200">&#34;nick&#34;</span><span style="color:#111">:</span>    <span style="color:#75af00">nick</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="获取post表单数据-url带查询参数">获取post表单数据（url带查询参数）</h3>

<pre><code>POST /post?id=1234&amp;page=1 HTTP/1.1
Content-Type: application/x-www-form-urlencoded

name=manu&amp;message=this_is_great
</code></pre>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/post&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>

		<span style="color:#75af00">id</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Query</span><span style="color:#111">(</span><span style="color:#d88200">&#34;id&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">page</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">DefaultQuery</span><span style="color:#111">(</span><span style="color:#d88200">&#34;page&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;0&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">name</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">PostForm</span><span style="color:#111">(</span><span style="color:#d88200">&#34;name&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">message</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">PostForm</span><span style="color:#111">(</span><span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">)</span>

		<span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Printf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;id: %s; page: %s; name: %s; message: %s&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">id</span><span style="color:#111">,</span> <span style="color:#75af00">page</span><span style="color:#111">,</span> <span style="color:#75af00">name</span><span style="color:#111">,</span> <span style="color:#75af00">message</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<pre><code>id: 1234; page: 1; name: manu; message: this_is_great
</code></pre>

<h3 id="映射参数-表单参数">映射参数 表单参数</h3>

<pre><code>POST /post?ids[a]=1234&amp;ids[b]=hello HTTP/1.1
Content-Type: application/x-www-form-urlencoded

names[first]=thinkerou&amp;names[second]=tianou
</code></pre>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/post&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>

		<span style="color:#75af00">ids</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">QueryMap</span><span style="color:#111">(</span><span style="color:#d88200">&#34;ids&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">names</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">PostFormMap</span><span style="color:#111">(</span><span style="color:#d88200">&#34;names&#34;</span><span style="color:#111">)</span>

		<span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Printf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;ids: %v; names: %v&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">ids</span><span style="color:#111">,</span> <span style="color:#75af00">names</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<pre><code>ids: map[b:hello a:1234], names: map[second:tianou first:thinkerou]
</code></pre>

<h3 id="上传文件">上传文件</h3>

<h4 id="单个文件上传">单个文件上传</h4>

<p>参考问题<a href="https://github.com/gin-gonic/gin/issues/774">＃774</a>和详细<a href="examples/upload-file/single">示例代码</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75715e">// Set a lower memory limit for multipart forms (default is 32 MiB)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/upload&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// single file
</span><span style="color:#75715e"></span>		<span style="color:#75af00">file</span><span style="color:#111">,</span> <span style="color:#75af00">_</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">FormFile</span><span style="color:#111">(</span><span style="color:#d88200">&#34;file&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">file</span><span style="color:#111">.</span><span style="color:#75af00">Filename</span><span style="color:#111">)</span>

		<span style="color:#75715e">// Upload the file to specific dst.
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// c.SaveUploadedFile(file, dst)
</span><span style="color:#75715e"></span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Sprintf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;&#39;%s&#39; uploaded!&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">file</span><span style="color:#111">.</span><span style="color:#75af00">Filename</span><span style="color:#111">))</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p><code>curl</code>示例:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -X POST http://localhost:8080/upload <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -F <span style="color:#d88200">&#34;file=@/Users/appleboy/test.zip&#34;</span> <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -H <span style="color:#d88200">&#34;Content-Type: multipart/form-data&#34;</span></code></pre></div>
<h4 id="多文件上传">多文件上传</h4>

<p>查看详细信息<a href="examples/upload-file/multiple">示例代码</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75715e">// Set a lower memory limit for multipart forms (default is 32 MiB)
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/upload&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// Multipart form
</span><span style="color:#75715e"></span>		<span style="color:#75af00">form</span><span style="color:#111">,</span> <span style="color:#75af00">_</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">MultipartForm</span><span style="color:#111">()</span>
		<span style="color:#75af00">files</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">form</span><span style="color:#111">.</span><span style="color:#75af00">File</span><span style="color:#111">[</span><span style="color:#d88200">&#34;upload[]&#34;</span><span style="color:#111">]</span>

		<span style="color:#00a8c8">for</span> <span style="color:#75af00">_</span><span style="color:#111">,</span> <span style="color:#75af00">file</span> <span style="color:#f92672">:=</span> <span style="color:#00a8c8">range</span> <span style="color:#75af00">files</span> <span style="color:#111">{</span>
			<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">file</span><span style="color:#111">.</span><span style="color:#75af00">Filename</span><span style="color:#111">)</span>

			<span style="color:#75715e">// Upload the file to specific dst.
</span><span style="color:#75715e"></span>			<span style="color:#75715e">// c.SaveUploadedFile(file, dst)
</span><span style="color:#75715e"></span>		<span style="color:#111">}</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Sprintf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;%d files uploaded!&#34;</span><span style="color:#111">,</span> <span style="color:#111">len</span><span style="color:#111">(</span><span style="color:#75af00">files</span><span style="color:#111">)))</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p><code>curl</code>示例:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl -X POST http://localhost:8080/upload <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -F <span style="color:#d88200">&#34;upload[]=@/Users/appleboy/test1.zip&#34;</span> <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -F <span style="color:#d88200">&#34;upload[]=@/Users/appleboy/test2.zip&#34;</span> <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -H <span style="color:#d88200">&#34;Content-Type: multipart/form-data&#34;</span></code></pre></div>
<h3 id="路由组">路由组</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Simple group: v1
</span><span style="color:#75715e"></span>	<span style="color:#75af00">v1</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Group</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/v1&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">{</span>
		<span style="color:#75af00">v1</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/login&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">loginEndpoint</span><span style="color:#111">)</span>
		<span style="color:#75af00">v1</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/submit&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">submitEndpoint</span><span style="color:#111">)</span>
		<span style="color:#75af00">v1</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/read&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">readEndpoint</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>

	<span style="color:#75715e">// Simple group: v2
</span><span style="color:#75715e"></span>	<span style="color:#75af00">v2</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Group</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/v2&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">{</span>
		<span style="color:#75af00">v2</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/login&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">loginEndpoint</span><span style="color:#111">)</span>
		<span style="color:#75af00">v2</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/submit&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">submitEndpoint</span><span style="color:#111">)</span>
		<span style="color:#75af00">v2</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/read&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">readEndpoint</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="默认初始化-gin">默认初始化 Gin</h3>

<p>用</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">()</span></code></pre></div>
<p>代替</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Default With the Logger and Recovery middleware already attached
</span><span style="color:#75715e"></span><span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span></code></pre></div>
<h3 id="使用中间件">使用中间件</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75715e">// Creates a router without any middleware by default
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Global middleware
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// Logger middleware will write the logs to gin.DefaultWriter even if you set with GIN_MODE=release.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// By default gin.DefaultWriter = os.Stdout
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Use</span><span style="color:#111">(</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Logger</span><span style="color:#111">())</span>

	<span style="color:#75715e">// Recovery middleware recovers from any panics and writes a 500 if there was one.
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Use</span><span style="color:#111">(</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Recovery</span><span style="color:#111">())</span>

	<span style="color:#75715e">// Per route middleware, you can add as many as you desire.
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/benchmark&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">MyBenchLogger</span><span style="color:#111">(),</span> <span style="color:#75af00">benchEndpoint</span><span style="color:#111">)</span>

	<span style="color:#75715e">// Authorization group
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// authorized := r.Group(&#34;/&#34;, AuthRequired())
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// exactly the same as:
</span><span style="color:#75715e"></span>	<span style="color:#75af00">authorized</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Group</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">)</span>
	<span style="color:#75715e">// per group middleware! in this case we use the custom created
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// AuthRequired() middleware just in the &#34;authorized&#34; group.
</span><span style="color:#75715e"></span>	<span style="color:#75af00">authorized</span><span style="color:#111">.</span><span style="color:#75af00">Use</span><span style="color:#111">(</span><span style="color:#75af00">AuthRequired</span><span style="color:#111">())</span>
	<span style="color:#111">{</span>
		<span style="color:#75af00">authorized</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/login&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">loginEndpoint</span><span style="color:#111">)</span>
		<span style="color:#75af00">authorized</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/submit&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">submitEndpoint</span><span style="color:#111">)</span>
		<span style="color:#75af00">authorized</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/read&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">readEndpoint</span><span style="color:#111">)</span>

		<span style="color:#75715e">// nested group
</span><span style="color:#75715e"></span>		<span style="color:#75af00">testing</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">authorized</span><span style="color:#111">.</span><span style="color:#75af00">Group</span><span style="color:#111">(</span><span style="color:#d88200">&#34;testing&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">testing</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/analytics&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">analyticsEndpoint</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="如何记录日志">如何记录日志</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
    <span style="color:#75715e">// Disable Console Color, you don&#39;t need console color when writing the logs to file.
</span><span style="color:#75715e"></span>    <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">DisableConsoleColor</span><span style="color:#111">()</span>

    <span style="color:#75715e">// Logging to a file.
</span><span style="color:#75715e"></span>    <span style="color:#75af00">f</span><span style="color:#111">,</span> <span style="color:#75af00">_</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">os</span><span style="color:#111">.</span><span style="color:#75af00">Create</span><span style="color:#111">(</span><span style="color:#d88200">&#34;gin.log&#34;</span><span style="color:#111">)</span>
    <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">DefaultWriter</span> <span style="color:#111">=</span> <span style="color:#75af00">io</span><span style="color:#111">.</span><span style="color:#75af00">MultiWriter</span><span style="color:#111">(</span><span style="color:#75af00">f</span><span style="color:#111">)</span>

    <span style="color:#75715e">// Use the following code if you need to write the logs to file and console at the same time.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// gin.DefaultWriter = io.MultiWriter(f, os.Stdout)
</span><span style="color:#75715e"></span>
    <span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/ping&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;pong&#34;</span><span style="color:#111">)</span>
    <span style="color:#111">})</span>

    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="模型绑定和验证">模型绑定和验证</h3>

<p>要将请求主体绑定到类型中，请使用模型绑定。我们目前支持JSON，XML和标准表单值的绑定（foo = bar＆boo = baz）。</p>

<p>Gin使用<a href="https://github.com/go-playground/validator">** go-playground/validator.v8 **</a>进行验证。检查有关标签用法的完整文档<a href="http://godoc.org/gopkg.in/go-playground/validator.v8#hdr-Baked_In_Validators_and_Tags">此处</a>。</p>

<p>请注意，您需要在要绑定的所有字段上设置相应的绑定标记。例如，从JSON绑定时，设置<code>json：“fieldname”</code>。</p>

<p>此外，Gin提供了两组绑定方法：
- <strong>类型</strong> - 必须绑定
   - <strong>方法</strong> - <code>Bind</code>，<code>BindJSON</code>，<code>BindXML</code>，<code>BindQuery</code>
   - <strong>行为</strong> - 这些方法在引擎盖下使用<code>MustBindWith</code>。如果存在绑定错误，则使用<code>c.AbortWithError(400，err).SetType(ErrorTypeBind)</code>中止请求。这将响应状态代码设置为400，并将<code>Content-Type</code>标头设置为<code>text/plain;字符集= UTF-8</code>。请注意，如果您在此之后尝试设置响应代码，则会发出警告“[GIN-debug] [警告]标题已经写入。想用422<code>覆盖状态代码400。如果您希望更好地控制行为，请考虑使用</code>ShouldBind<code>等效方法。
- **类型** - 应该绑定
   - **方法** -</code>ShouldBind<code>，</code>ShouldBindJSON<code>，</code>ShouldBindXML<code>，</code>ShouldBindQuery<code>
   - **行为** - 这些方法在引擎盖下使用</code>ShouldBindWith`。如果存在绑定错误，则返回错误，开发人员有责任正确处理请求和错误。</p>

<p>使用Bind方法时，Gin会尝试根据Content-Type标头推断出绑定器。如果你确定你绑定了什么，你可以使用 <code>MustBindWith</code> 或 <code>ShouldBindWith</code>。</p>

<p>您还可以指定需要特定字段。如果字段用 <code>binding：“必需”</code> 来装饰，并且在绑定时具有空值，则会返回错误。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Binding from JSON
</span><span style="color:#75715e"></span><span style="color:#00a8c8">type</span> <span style="color:#75af00">Login</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
	<span style="color:#75af00">User</span>     <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;user&#34; json:&#34;user&#34; xml:&#34;user&#34;  binding:&#34;required&#34;`</span>
	<span style="color:#75af00">Password</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;password&#34; json:&#34;password&#34; xml:&#34;password&#34; binding:&#34;required&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Example for binding JSON ({&#34;user&#34;: &#34;manu&#34;, &#34;password&#34;: &#34;123&#34;})
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/loginJSON&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">var</span> <span style="color:#75af00">json</span> <span style="color:#75af00">Login</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindJSON</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">json</span><span style="color:#111">);</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusBadRequest</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;error&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">err</span><span style="color:#111">.</span><span style="color:#75af00">Error</span><span style="color:#111">()})</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span>
		
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">json</span><span style="color:#111">.</span><span style="color:#75af00">User</span> <span style="color:#f92672">!=</span> <span style="color:#d88200">&#34;manu&#34;</span> <span style="color:#f92672">||</span> <span style="color:#75af00">json</span><span style="color:#111">.</span><span style="color:#75af00">Password</span> <span style="color:#f92672">!=</span> <span style="color:#d88200">&#34;123&#34;</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusUnauthorized</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;unauthorized&#34;</span><span style="color:#111">})</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span> 
		
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;you are logged in&#34;</span><span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Example for binding XML (
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	&lt;root&gt;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//		&lt;user&gt;user&lt;/user&gt;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//		&lt;password&gt;123&lt;/user&gt;
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//	&lt;/root&gt;)
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/loginXML&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">var</span> <span style="color:#75af00">xml</span> <span style="color:#75af00">Login</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindXML</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">xml</span><span style="color:#111">);</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusBadRequest</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;error&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">err</span><span style="color:#111">.</span><span style="color:#75af00">Error</span><span style="color:#111">()})</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span>
		
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">xml</span><span style="color:#111">.</span><span style="color:#75af00">User</span> <span style="color:#f92672">!=</span> <span style="color:#d88200">&#34;manu&#34;</span> <span style="color:#f92672">||</span> <span style="color:#75af00">xml</span><span style="color:#111">.</span><span style="color:#75af00">Password</span> <span style="color:#f92672">!=</span> <span style="color:#d88200">&#34;123&#34;</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusUnauthorized</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;unauthorized&#34;</span><span style="color:#111">})</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span> 
		
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;you are logged in&#34;</span><span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Example for binding a HTML form (user=manu&amp;password=123)
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/loginForm&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">var</span> <span style="color:#75af00">form</span> <span style="color:#75af00">Login</span>
		<span style="color:#75715e">// This will infer what binder to use depending on the content-type header.
</span><span style="color:#75715e"></span>		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">form</span><span style="color:#111">);</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusBadRequest</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;error&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">err</span><span style="color:#111">.</span><span style="color:#75af00">Error</span><span style="color:#111">()})</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span>
		
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">form</span><span style="color:#111">.</span><span style="color:#75af00">User</span> <span style="color:#f92672">!=</span> <span style="color:#d88200">&#34;manu&#34;</span> <span style="color:#f92672">||</span> <span style="color:#75af00">form</span><span style="color:#111">.</span><span style="color:#75af00">Password</span> <span style="color:#f92672">!=</span> <span style="color:#d88200">&#34;123&#34;</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusUnauthorized</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;unauthorized&#34;</span><span style="color:#111">})</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span> 
		
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;you are logged in&#34;</span><span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p><strong>简单请求</strong></p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ curl -v -X POST <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  http://localhost:8080/loginJSON <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -H <span style="color:#d88200">&#39;content-type: application/json&#39;</span> <span style="color:#8045ff">\
</span><span style="color:#8045ff"></span>  -d <span style="color:#d88200">&#39;{ &#34;user&#34;: &#34;manu&#34; }&#39;</span>
&gt; POST /loginJSON HTTP/1.1
&gt; Host: localhost:8080
&gt; User-Agent: curl/7.51.0
&gt; Accept: */*
&gt; content-type: application/json
&gt; Content-Length: <span style="color:#ae81ff">18</span>
&gt;
* upload completely sent off: <span style="color:#ae81ff">18</span> out of <span style="color:#ae81ff">18</span> bytes
&lt; HTTP/1.1 <span style="color:#ae81ff">400</span> Bad Request
&lt; Content-Type: application/json<span style="color:#111">;</span> <span style="color:#111">charset</span><span style="color:#f92672">=</span>utf-8
&lt; Date: Fri, <span style="color:#ae81ff">04</span> Aug <span style="color:#ae81ff">2017</span> <span style="color:#ae81ff">03</span>:51:31 GMT
&lt; Content-Length: <span style="color:#ae81ff">100</span>
&lt;
<span style="color:#f92672">{</span><span style="color:#d88200">&#34;error&#34;</span>:<span style="color:#d88200">&#34;Key: &#39;Login.Password&#39; Error:Field validation for &#39;Password&#39; failed on the &#39;required&#39; tag&#34;</span><span style="color:#f92672">}</span></code></pre></div>
<p><strong>跳过验证</strong></p>

<p>使用上面 的<code>curl</code> 命令运行上面的例子时，它返回错误。 因为这个例子使用 <code>binding：'需要</code><code>。 如果使用 `binding：“ -</code>`，那么在再次运行上面的例子时它不会返回错误。</p>

<h3 id="自定义验证器">自定义验证器</h3>

<p>也可以注册自定义验证器。 请参阅<a href="examples/custom-validation/server.go">示例代码</a>。</p>

<p><a href="#" title="examples/http-pusher/main.go go">embedmd</a>：＃(examples/custom-validation/server.go go)</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;net/http&#34;</span>
	<span style="color:#d88200">&#34;reflect&#34;</span>
	<span style="color:#d88200">&#34;time&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
	<span style="color:#d88200">&#34;github.com/gin-gonic/gin/binding&#34;</span>
	<span style="color:#d88200">&#34;gopkg.in/go-playground/validator.v8&#34;</span>
<span style="color:#111">)</span>

<span style="color:#75715e">// Booking contains binded and validated data.
</span><span style="color:#75715e"></span><span style="color:#00a8c8">type</span> <span style="color:#75af00">Booking</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
	<span style="color:#75af00">CheckIn</span>  <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Time</span> <span style="color:#d88200">`form:&#34;check_in&#34; binding:&#34;required,bookabledate&#34; time_format:&#34;2006-01-02&#34;`</span>
	<span style="color:#75af00">CheckOut</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Time</span> <span style="color:#d88200">`form:&#34;check_out&#34; binding:&#34;required,gtfield=CheckIn&#34; time_format:&#34;2006-01-02&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">bookableDate</span><span style="color:#111">(</span>
	<span style="color:#75af00">v</span> <span style="color:#f92672">*</span><span style="color:#75af00">validator</span><span style="color:#111">.</span><span style="color:#75af00">Validate</span><span style="color:#111">,</span> <span style="color:#75af00">topStruct</span> <span style="color:#75af00">reflect</span><span style="color:#111">.</span><span style="color:#75af00">Value</span><span style="color:#111">,</span> <span style="color:#75af00">currentStructOrField</span> <span style="color:#75af00">reflect</span><span style="color:#111">.</span><span style="color:#75af00">Value</span><span style="color:#111">,</span>
	<span style="color:#75af00">field</span> <span style="color:#75af00">reflect</span><span style="color:#111">.</span><span style="color:#75af00">Value</span><span style="color:#111">,</span> <span style="color:#75af00">fieldType</span> <span style="color:#75af00">reflect</span><span style="color:#111">.</span><span style="color:#75af00">Type</span><span style="color:#111">,</span> <span style="color:#75af00">fieldKind</span> <span style="color:#75af00">reflect</span><span style="color:#111">.</span><span style="color:#75af00">Kind</span><span style="color:#111">,</span> <span style="color:#75af00">param</span> <span style="color:#00a8c8">string</span><span style="color:#111">,</span>
<span style="color:#111">)</span> <span style="color:#00a8c8">bool</span> <span style="color:#111">{</span>
	<span style="color:#00a8c8">if</span> <span style="color:#75af00">date</span><span style="color:#111">,</span> <span style="color:#75af00">ok</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">field</span><span style="color:#111">.</span><span style="color:#75af00">Interface</span><span style="color:#111">().(</span><span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Time</span><span style="color:#111">);</span> <span style="color:#75af00">ok</span> <span style="color:#111">{</span>
		<span style="color:#75af00">today</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Now</span><span style="color:#111">()</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">today</span><span style="color:#111">.</span><span style="color:#75af00">Year</span><span style="color:#111">()</span> <span style="color:#111">&gt;</span> <span style="color:#75af00">date</span><span style="color:#111">.</span><span style="color:#75af00">Year</span><span style="color:#111">()</span> <span style="color:#f92672">||</span> <span style="color:#75af00">today</span><span style="color:#111">.</span><span style="color:#75af00">YearDay</span><span style="color:#111">()</span> <span style="color:#111">&gt;</span> <span style="color:#75af00">date</span><span style="color:#111">.</span><span style="color:#75af00">YearDay</span><span style="color:#111">()</span> <span style="color:#111">{</span>
			<span style="color:#00a8c8">return</span> <span style="color:#00a8c8">false</span>
		<span style="color:#111">}</span>
	<span style="color:#111">}</span>
	<span style="color:#00a8c8">return</span> <span style="color:#00a8c8">true</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">route</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#00a8c8">if</span> <span style="color:#75af00">v</span><span style="color:#111">,</span> <span style="color:#75af00">ok</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">binding</span><span style="color:#111">.</span><span style="color:#75af00">Validator</span><span style="color:#111">.</span><span style="color:#75af00">Engine</span><span style="color:#111">().(</span><span style="color:#f92672">*</span><span style="color:#75af00">validator</span><span style="color:#111">.</span><span style="color:#75af00">Validate</span><span style="color:#111">);</span> <span style="color:#75af00">ok</span> <span style="color:#111">{</span>
		<span style="color:#75af00">v</span><span style="color:#111">.</span><span style="color:#75af00">RegisterValidation</span><span style="color:#111">(</span><span style="color:#d88200">&#34;bookabledate&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">bookableDate</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">route</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/bookable&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">getBookable</span><span style="color:#111">)</span>
	<span style="color:#75af00">route</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8085&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">getBookable</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
	<span style="color:#00a8c8">var</span> <span style="color:#75af00">b</span> <span style="color:#75af00">Booking</span>
	<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindWith</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">b</span><span style="color:#111">,</span> <span style="color:#75af00">binding</span><span style="color:#111">.</span><span style="color:#75af00">Query</span><span style="color:#111">);</span> <span style="color:#75af00">err</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Booking dates are valid!&#34;</span><span style="color:#111">})</span>
	<span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusBadRequest</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;error&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">err</span><span style="color:#111">.</span><span style="color:#75af00">Error</span><span style="color:#111">()})</span>
	<span style="color:#111">}</span>
<span style="color:#111">}</span></code></pre></div><div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ curl &#34;localhost:8085/bookable?check_in=2018-04-16&amp;check_out=2018-04-17&#34;
{&#34;message&#34;:&#34;Booking dates are valid!&#34;}

$ curl &#34;localhost:8085/bookable?check_in=2018-03-08&amp;check_out=2018-03-09&#34;
{&#34;error&#34;:&#34;Key: &#39;Booking.CheckIn&#39; Error:Field validation for &#39;CheckIn&#39; failed on the &#39;bookabledate&#39; tag&#34;}</code></pre></div>
<p><a href="https://github.com/go-playground/validator/releases/tag/v8.7">结构级验证</a>也可以这种方式注册。
请参阅<a href="examples/struct-lvl-validations">struct-lvl-validation示例</a>以了解更多信息。</p>

<h3 id="只绑定url查询参数">只绑定url查询参数</h3>

<p><code>ShouldBindQuery</code> 函数只绑定url查询参数而不是post字段。 请参阅<a href="https://github.com/gin-gonic/gin/issues/742#issuecomment-315953017">详细信息</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;log&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">Person</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
	<span style="color:#75af00">Name</span>    <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;name&#34;`</span>
	<span style="color:#75af00">Address</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;address&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">route</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">route</span><span style="color:#111">.</span><span style="color:#75af00">Any</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/testing&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">startPage</span><span style="color:#111">)</span>
	<span style="color:#75af00">route</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8085&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">startPage</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
	<span style="color:#00a8c8">var</span> <span style="color:#75af00">person</span> <span style="color:#75af00">Person</span>
	<span style="color:#00a8c8">if</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindQuery</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">person</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;====== Only Bind By Query String ======&#34;</span><span style="color:#111">)</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">person</span><span style="color:#111">.</span><span style="color:#75af00">Name</span><span style="color:#111">)</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">person</span><span style="color:#111">.</span><span style="color:#75af00">Address</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>
	<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Success&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="url查询参数绑定到struct-或post表单数据">url查询参数绑定到struct（或POST表单数据）</h3>

<p>请参阅<a href="https://github.com/gin-gonic/gin/issues/742#issuecomment-264681292">详细信息</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;log&#34;</span>
	<span style="color:#d88200">&#34;time&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">Person</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
	<span style="color:#75af00">Name</span>     <span style="color:#00a8c8">string</span>    <span style="color:#d88200">`form:&#34;name&#34;`</span>
	<span style="color:#75af00">Address</span>  <span style="color:#00a8c8">string</span>    <span style="color:#d88200">`form:&#34;address&#34;`</span>
	<span style="color:#75af00">Birthday</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Time</span> <span style="color:#d88200">`form:&#34;birthday&#34; time_format:&#34;2006-01-02&#34; time_utc:&#34;1&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">route</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">route</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/testing&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">startPage</span><span style="color:#111">)</span>
	<span style="color:#75af00">route</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8085&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">startPage</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
	<span style="color:#00a8c8">var</span> <span style="color:#75af00">person</span> <span style="color:#75af00">Person</span>
	<span style="color:#75715e">// If `GET`, only `Form` binding engine (`query`) used.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// If `POST`, first checks the `content-type` for `JSON` or `XML`, then uses `Form` (`form-data`).
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// See more at https://github.com/gin-gonic/gin/blob/master/binding/binding.go#L48
</span><span style="color:#75715e"></span>	<span style="color:#00a8c8">if</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">person</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">person</span><span style="color:#111">.</span><span style="color:#75af00">Name</span><span style="color:#111">)</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">person</span><span style="color:#111">.</span><span style="color:#75af00">Address</span><span style="color:#111">)</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">person</span><span style="color:#111">.</span><span style="color:#75af00">Birthday</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Success&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>测试:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl -X GET <span style="color:#d88200">&#34;localhost:8085/testing?name=appleboy&amp;address=xyz&amp;birthday=1992-03-15&#34;</span></code></pre></div>
<h3 id="绑定-html-复选框">绑定 HTML 复选框</h3>

<p>参见<a href="https://github.com/gin-gonic/gin/issues/129#issuecomment-124260092">详细信息</a></p>

<p>main.go</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">...</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">myForm</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">Colors</span> <span style="color:#111">[]</span><span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;colors[]&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#f92672">...</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">formHandler</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">var</span> <span style="color:#75af00">fakeForm</span> <span style="color:#75af00">myForm</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">fakeForm</span><span style="color:#111">)</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;color&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">fakeForm</span><span style="color:#111">.</span><span style="color:#75af00">Colors</span><span style="color:#111">})</span>
<span style="color:#111">}</span>

<span style="color:#f92672">...</span></code></pre></div>
<p>form.html</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#111">&lt;</span><span style="color:#f92672">form</span> <span style="color:#75af00">action</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;/&#34;</span> <span style="color:#75af00">method</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;POST&#34;</span><span style="color:#111">&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>Check some colors<span style="color:#111">&lt;/</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">label</span> <span style="color:#75af00">for</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;red&#34;</span><span style="color:#111">&gt;</span>Red<span style="color:#111">&lt;/</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;checkbox&#34;</span> <span style="color:#75af00">name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;colors[]&#34;</span> <span style="color:#75af00">value</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;red&#34;</span> <span style="color:#75af00">id</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;red&#34;</span> <span style="color:#111">/&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">label</span> <span style="color:#75af00">for</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;green&#34;</span><span style="color:#111">&gt;</span>Green<span style="color:#111">&lt;/</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;checkbox&#34;</span> <span style="color:#75af00">name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;colors[]&#34;</span> <span style="color:#75af00">value</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;green&#34;</span> <span style="color:#75af00">id</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;green&#34;</span> <span style="color:#111">/&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">label</span> <span style="color:#75af00">for</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;blue&#34;</span><span style="color:#111">&gt;</span>Blue<span style="color:#111">&lt;/</span><span style="color:#f92672">label</span><span style="color:#111">&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;checkbox&#34;</span> <span style="color:#75af00">name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;colors[]&#34;</span> <span style="color:#75af00">value</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;blue&#34;</span> <span style="color:#75af00">id</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;blue&#34;</span> <span style="color:#111">/&gt;</span>
    <span style="color:#111">&lt;</span><span style="color:#f92672">input</span> <span style="color:#75af00">type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#34;submit&#34;</span> <span style="color:#111">/&gt;</span>
<span style="color:#111">&lt;/</span><span style="color:#f92672">form</span><span style="color:#111">&gt;</span></code></pre></div>
<p>result:</p>

<pre><code>{&quot;color&quot;:[&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;]}
</code></pre>

<h3 id="multipart-urlencoded-绑定">Multipart Urlencoded 绑定</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">LoginForm</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
	<span style="color:#75af00">User</span>     <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;user&#34; binding:&#34;required&#34;`</span>
	<span style="color:#75af00">Password</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;password&#34; binding:&#34;required&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/login&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// you can bind multipart form with explicit binding declaration:
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// c.ShouldBindWith(&amp;form, binding.Form)
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// or you can simply use autobinding with ShouldBind method:
</span><span style="color:#75715e"></span>		<span style="color:#00a8c8">var</span> <span style="color:#75af00">form</span> <span style="color:#75af00">LoginForm</span>
		<span style="color:#75715e">// in this case proper binding will be automatically selected
</span><span style="color:#75715e"></span>		<span style="color:#00a8c8">if</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">form</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#00a8c8">if</span> <span style="color:#75af00">form</span><span style="color:#111">.</span><span style="color:#75af00">User</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#34;user&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75af00">form</span><span style="color:#111">.</span><span style="color:#75af00">Password</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#34;password&#34;</span> <span style="color:#111">{</span>
				<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;you are logged in&#34;</span><span style="color:#111">})</span>
			<span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
				<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">401</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;unauthorized&#34;</span><span style="color:#111">})</span>
			<span style="color:#111">}</span>
		<span style="color:#111">}</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>测试:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ curl -v --form <span style="color:#111">user</span><span style="color:#f92672">=</span>user --form <span style="color:#111">password</span><span style="color:#f92672">=</span>password http://localhost:8080/login</code></pre></div>
<h3 id="xml-json-yaml-protobuf-渲染">XML JSON YAML ProtoBuf 渲染</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// gin.H is a shortcut for map[string]interface{}
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someJSON&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;hey&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/moreJSON&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// You also can use a struct
</span><span style="color:#75715e"></span>		<span style="color:#00a8c8">var</span> <span style="color:#75af00">msg</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
			<span style="color:#75af00">Name</span>    <span style="color:#00a8c8">string</span> <span style="color:#d88200">`json:&#34;user&#34;`</span>
			<span style="color:#75af00">Message</span> <span style="color:#00a8c8">string</span>
			<span style="color:#75af00">Number</span>  <span style="color:#00a8c8">int</span>
		<span style="color:#111">}</span>
		<span style="color:#75af00">msg</span><span style="color:#111">.</span><span style="color:#75af00">Name</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;Lena&#34;</span>
		<span style="color:#75af00">msg</span><span style="color:#111">.</span><span style="color:#75af00">Message</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;hey&#34;</span>
		<span style="color:#75af00">msg</span><span style="color:#111">.</span><span style="color:#75af00">Number</span> <span style="color:#111">=</span> <span style="color:#ae81ff">123</span>
		<span style="color:#75715e">// Note that msg.Name becomes &#34;user&#34; in the JSON
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// Will output  :   {&#34;user&#34;: &#34;Lena&#34;, &#34;Message&#34;: &#34;hey&#34;, &#34;Number&#34;: 123}
</span><span style="color:#75715e"></span>		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">msg</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someXML&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">XML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;hey&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someYAML&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">YAML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;message&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;hey&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someProtoBuf&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">reps</span> <span style="color:#f92672">:=</span> <span style="color:#111">[]</span><span style="color:#00a8c8">int64</span><span style="color:#111">{</span><span style="color:#111">int64</span><span style="color:#111">(</span><span style="color:#ae81ff">1</span><span style="color:#111">),</span> <span style="color:#111">int64</span><span style="color:#111">(</span><span style="color:#ae81ff">2</span><span style="color:#111">)}</span>
		<span style="color:#75af00">label</span> <span style="color:#f92672">:=</span> <span style="color:#d88200">&#34;test&#34;</span>
		<span style="color:#75715e">// The specific definition of protobuf is written in the testdata/protoexample file.
</span><span style="color:#75715e"></span>		<span style="color:#75af00">data</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">protoexample</span><span style="color:#111">.</span><span style="color:#75af00">Test</span><span style="color:#111">{</span>
			<span style="color:#75af00">Label</span><span style="color:#111">:</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">label</span><span style="color:#111">,</span>
			<span style="color:#75af00">Reps</span><span style="color:#111">:</span>  <span style="color:#75af00">reps</span><span style="color:#111">,</span>
		<span style="color:#111">}</span>
		<span style="color:#75715e">// Note that data becomes binary data in the response
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// Will output protoexample.Test protobuf serialized data
</span><span style="color:#75715e"></span>		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ProtoBuf</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h4 id="securejson">SecureJSON</h4>

<p>使用 SecureJSON 来防止 json 劫持。 如果给定的结构是数组值，则默认预 置<code>“while(1)，”</code> 到响应体。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// You can also use your own secure json prefix
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// r.SecureJsonPrefix(&#34;)]}&#39;,\n&#34;)
</span><span style="color:#75715e"></span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someJSON&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">names</span> <span style="color:#f92672">:=</span> <span style="color:#111">[]</span><span style="color:#00a8c8">string</span><span style="color:#111">{</span><span style="color:#d88200">&#34;lena&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;austin&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;foo&#34;</span><span style="color:#111">}</span>

		<span style="color:#75715e">// Will output  :   while(1);[&#34;lena&#34;,&#34;austin&#34;,&#34;foo&#34;]
</span><span style="color:#75715e"></span>		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">SecureJSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">names</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h4 id="jsonp">JSONP</h4>

<p>使用 JSONP 从不同域中的服务器请求数据。 如果查询参数回调存在，则将回调添加到响应正文。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/JSONP?callback=x&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">data</span> <span style="color:#f92672">:=</span> <span style="color:#00a8c8">map</span><span style="color:#111">[</span><span style="color:#00a8c8">string</span><span style="color:#111">]</span><span style="color:#00a8c8">interface</span><span style="color:#111">{}{</span>
			<span style="color:#d88200">&#34;foo&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;bar&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">}</span>
		
		<span style="color:#75715e">//callback is x
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// Will output  :   x({\&#34;foo\&#34;:\&#34;bar\&#34;})
</span><span style="color:#75715e"></span>		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSONP</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h4 id="asciijson">AsciiJSON</h4>

<p>使用 Ascii JSON 生成具有转义的非 ASCII 字符的仅 ASCII JSON。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someJSON&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">data</span> <span style="color:#f92672">:=</span> <span style="color:#00a8c8">map</span><span style="color:#111">[</span><span style="color:#00a8c8">string</span><span style="color:#111">]</span><span style="color:#00a8c8">interface</span><span style="color:#111">{}{</span>
			<span style="color:#d88200">&#34;lang&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;GO语言&#34;</span><span style="color:#111">,</span>
			<span style="color:#d88200">&#34;tag&#34;</span><span style="color:#111">:</span>  <span style="color:#d88200">&#34;&lt;br&gt;&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">}</span>

		<span style="color:#75715e">// will output : {&#34;lang&#34;:&#34;GO\u8bed\u8a00&#34;,&#34;tag&#34;:&#34;\u003cbr\u003e&#34;}
</span><span style="color:#75715e"></span>		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">AsciiJSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h4 id="purejson">PureJSON</h4>

<p>通常，JSON使用unicode替换特殊HTML字符，例如 <code>&lt;</code> 变为 <code>\ u003c</code>。 如果要按字面意思对这些字符进行编码，则可以使用 PureJSON。
Go 1.6及更低版本无法使用此功能。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	
	<span style="color:#75715e">// Serves unicode entities
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/json&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;html&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;&lt;b&gt;Hello, world!&lt;/b&gt;&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	
	<span style="color:#75715e">// Serves literal characters
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/purejson&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">PureJSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;html&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;&lt;b&gt;Hello, world!&lt;/b&gt;&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	
	<span style="color:#75715e">// listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#111">:</span><span style="color:#ae81ff">8080</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="静态文件服务">静态文件服务</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Static</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/assets&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;./assets&#34;</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">StaticFS</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/more_static&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Dir</span><span style="color:#111">(</span><span style="color:#d88200">&#34;my_file_system&#34;</span><span style="color:#111">))</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">StaticFile</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/favicon.ico&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;./resources/favicon.ico&#34;</span><span style="color:#111">)</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="从-reader-读取数据">从 reader 读取数据</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/someDataFromReader&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">response</span><span style="color:#111">,</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Get</span><span style="color:#111">(</span><span style="color:#d88200">&#34;https://raw.githubusercontent.com/gin-gonic/logo/master/color.png&#34;</span><span style="color:#111">)</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#f92672">||</span> <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">StatusCode</span> <span style="color:#f92672">!=</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Status</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusServiceUnavailable</span><span style="color:#111">)</span>
			<span style="color:#00a8c8">return</span>
		<span style="color:#111">}</span>

		<span style="color:#75af00">reader</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">Body</span>
		<span style="color:#75af00">contentLength</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">ContentLength</span>
		<span style="color:#75af00">contentType</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">Header</span><span style="color:#111">.</span><span style="color:#75af00">Get</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Content-Type&#34;</span><span style="color:#111">)</span>

		<span style="color:#75af00">extraHeaders</span> <span style="color:#f92672">:=</span> <span style="color:#00a8c8">map</span><span style="color:#111">[</span><span style="color:#00a8c8">string</span><span style="color:#111">]</span><span style="color:#00a8c8">string</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;Content-Disposition&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">`attachment; filename=&#34;gopher.png&#34;`</span><span style="color:#111">,</span>
		<span style="color:#111">}</span>

		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">DataFromReader</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">contentLength</span><span style="color:#111">,</span> <span style="color:#75af00">contentType</span><span style="color:#111">,</span> <span style="color:#75af00">reader</span><span style="color:#111">,</span> <span style="color:#75af00">extraHeaders</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="html-渲染">HTML 渲染</h3>

<p>使用LoadHTMLGlob()或LoadHTMLFiles()</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">LoadHTMLGlob</span><span style="color:#111">(</span><span style="color:#d88200">&#34;templates/*&#34;</span><span style="color:#111">)</span>
	<span style="color:#75715e">//router.LoadHTMLFiles(&#34;templates/template1.html&#34;, &#34;templates/template2.html&#34;)
</span><span style="color:#75715e"></span>	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/index&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">HTML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;index.tmpl&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;title&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Main website&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>templates/index.tmpl</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#111">&lt;</span><span style="color:#f92672">html</span><span style="color:#111">&gt;</span>
	<span style="color:#111">&lt;</span><span style="color:#f92672">h1</span><span style="color:#111">&gt;</span>
		{{ .title }}
	<span style="color:#111">&lt;/</span><span style="color:#f92672">h1</span><span style="color:#111">&gt;</span>
<span style="color:#111">&lt;/</span><span style="color:#f92672">html</span><span style="color:#111">&gt;</span></code></pre></div>
<p>在不同目录中使用具有相同名称的模板</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">LoadHTMLGlob</span><span style="color:#111">(</span><span style="color:#d88200">&#34;templates/**/*&#34;</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/posts/index&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">HTML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;posts/index.tmpl&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;title&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Posts&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/users/index&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">HTML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;users/index.tmpl&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;title&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Users&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>templates/posts/index.tmpl</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;posts/index.tmpl&#34; }}
<span style="color:#111">&lt;</span><span style="color:#f92672">html</span><span style="color:#111">&gt;&lt;</span><span style="color:#f92672">h1</span><span style="color:#111">&gt;</span>
	{{ .title }}
<span style="color:#111">&lt;/</span><span style="color:#f92672">h1</span><span style="color:#111">&gt;</span>
<span style="color:#111">&lt;</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>Using posts/index.tmpl<span style="color:#111">&lt;/</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>
<span style="color:#111">&lt;/</span><span style="color:#f92672">html</span><span style="color:#111">&gt;</span>
{{ end }}</code></pre></div>
<p>templates/users/index.tmpl</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;users/index.tmpl&#34; }}
<span style="color:#111">&lt;</span><span style="color:#f92672">html</span><span style="color:#111">&gt;&lt;</span><span style="color:#f92672">h1</span><span style="color:#111">&gt;</span>
	{{ .title }}
<span style="color:#111">&lt;/</span><span style="color:#f92672">h1</span><span style="color:#111">&gt;</span>
<span style="color:#111">&lt;</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>Using users/index.tmpl<span style="color:#111">&lt;/</span><span style="color:#f92672">p</span><span style="color:#111">&gt;</span>
<span style="color:#111">&lt;/</span><span style="color:#f92672">html</span><span style="color:#111">&gt;</span>
{{ end }}</code></pre></div>
<h4 id="自定义模板渲染器">自定义模板渲染器</h4>

<p>您还可以使用自己的 html 模板渲染</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#d88200">&#34;html/template&#34;</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">html</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">Must</span><span style="color:#111">(</span><span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">ParseFiles</span><span style="color:#111">(</span><span style="color:#d88200">&#34;file1&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;file2&#34;</span><span style="color:#111">))</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">SetHTMLTemplate</span><span style="color:#111">(</span><span style="color:#75af00">html</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h4 id="自定义分隔符">自定义分隔符</h4>

<p>您可以使用自定义分隔</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Delims</span><span style="color:#111">(</span><span style="color:#d88200">&#34;{[{&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;}]}&#34;</span><span style="color:#111">)</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">LoadHTMLGlob</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/path/to/templates&#34;</span><span style="color:#111">)</span></code></pre></div>
<h4 id="自定义模板功能">自定义模板功能</h4>

<p>查看详细信息<a href="examples/template">示例代码</a>。</p>

<p>main.go</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#111">(</span>
    <span style="color:#d88200">&#34;fmt&#34;</span>
    <span style="color:#d88200">&#34;html/template&#34;</span>
    <span style="color:#d88200">&#34;net/http&#34;</span>
    <span style="color:#d88200">&#34;time&#34;</span>

    <span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">formatAsDate</span><span style="color:#111">(</span><span style="color:#75af00">t</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Time</span><span style="color:#111">)</span> <span style="color:#00a8c8">string</span> <span style="color:#111">{</span>
    <span style="color:#75af00">year</span><span style="color:#111">,</span> <span style="color:#75af00">month</span><span style="color:#111">,</span> <span style="color:#75af00">day</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">t</span><span style="color:#111">.</span><span style="color:#75af00">Date</span><span style="color:#111">()</span>
    <span style="color:#00a8c8">return</span> <span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Sprintf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;%d%02d/%02d&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">year</span><span style="color:#111">,</span> <span style="color:#75af00">month</span><span style="color:#111">,</span> <span style="color:#75af00">day</span><span style="color:#111">)</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
    <span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Delims</span><span style="color:#111">(</span><span style="color:#d88200">&#34;{[{&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;}]}&#34;</span><span style="color:#111">)</span>
    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">SetFuncMap</span><span style="color:#111">(</span><span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">FuncMap</span><span style="color:#111">{</span>
        <span style="color:#d88200">&#34;formatAsDate&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">formatAsDate</span><span style="color:#111">,</span>
    <span style="color:#111">})</span>
    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">LoadHTMLFiles</span><span style="color:#111">(</span><span style="color:#d88200">&#34;./testdata/template/raw.tmpl&#34;</span><span style="color:#111">)</span>

    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/raw&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">HTML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;raw.tmpl&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">map</span><span style="color:#111">[</span><span style="color:#00a8c8">string</span><span style="color:#111">]</span><span style="color:#00a8c8">interface</span><span style="color:#111">{}{</span>
            <span style="color:#d88200">&#34;now&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Date</span><span style="color:#111">(</span><span style="color:#ae81ff">2017</span><span style="color:#111">,</span> <span style="color:#ae81ff">07</span><span style="color:#111">,</span> <span style="color:#ae81ff">01</span><span style="color:#111">,</span> <span style="color:#ae81ff">0</span><span style="color:#111">,</span> <span style="color:#ae81ff">0</span><span style="color:#111">,</span> <span style="color:#ae81ff">0</span><span style="color:#111">,</span> <span style="color:#ae81ff">0</span><span style="color:#111">,</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">UTC</span><span style="color:#111">),</span>
        <span style="color:#111">})</span>
    <span style="color:#111">})</span>

    <span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>raw.tmpl</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">日期: {[{.now | formatAsDate}]}</code></pre></div>
<p>结果:</p>

<pre><code>Date: 2017/07/01
</code></pre>

<h3 id="多模板">多模板</h3>

<p>Gin 允许默认只使用一个 html 模板。 检查<a href="https://github.com/gin-contrib/multitemplate">多模板渲染</a>以使用 go 1.6 <code>block template</code> 等功能。</p>

<h3 id="重定向">重定向</h3>

<p>发起HTTP重定向很简单。支持内部和外部重定向。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/test&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
	<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Redirect</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusMovedPermanently</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;http://www.google.com/&#34;</span><span style="color:#111">)</span>
<span style="color:#111">})</span></code></pre></div>
<p>发起路由器内部重定向，使用如下的<code>HandleContext</code>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/test&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Request</span><span style="color:#111">.</span><span style="color:#75af00">URL</span><span style="color:#111">.</span><span style="color:#75af00">Path</span> <span style="color:#111">=</span> <span style="color:#d88200">&#34;/test2&#34;</span>
    <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">HandleContext</span><span style="color:#111">(</span><span style="color:#75af00">c</span><span style="color:#111">)</span>
<span style="color:#111">})</span>
<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/test2&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;hello&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;world&#34;</span><span style="color:#111">})</span>
<span style="color:#111">})</span></code></pre></div>
<h3 id="自定义中间件">自定义中间件</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">Logger</span><span style="color:#111">()</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">HandlerFunc</span> <span style="color:#111">{</span>
	<span style="color:#00a8c8">return</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">t</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Now</span><span style="color:#111">()</span>

		<span style="color:#75715e">// Set example variable
</span><span style="color:#75715e"></span>		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Set</span><span style="color:#111">(</span><span style="color:#d88200">&#34;example&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;12345&#34;</span><span style="color:#111">)</span>

		<span style="color:#75715e">// before request
</span><span style="color:#75715e"></span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Next</span><span style="color:#111">()</span>

		<span style="color:#75715e">// after request
</span><span style="color:#75715e"></span>		<span style="color:#75af00">latency</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Since</span><span style="color:#111">(</span><span style="color:#75af00">t</span><span style="color:#111">)</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Print</span><span style="color:#111">(</span><span style="color:#75af00">latency</span><span style="color:#111">)</span>

		<span style="color:#75715e">// access the status we are sending
</span><span style="color:#75715e"></span>		<span style="color:#75af00">status</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Writer</span><span style="color:#111">.</span><span style="color:#75af00">Status</span><span style="color:#111">()</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">status</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">()</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Use</span><span style="color:#111">(</span><span style="color:#75af00">Logger</span><span style="color:#111">())</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/test&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">example</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">MustGet</span><span style="color:#111">(</span><span style="color:#d88200">&#34;example&#34;</span><span style="color:#111">).(</span><span style="color:#00a8c8">string</span><span style="color:#111">)</span>

		<span style="color:#75715e">// it would print: &#34;12345&#34;
</span><span style="color:#75715e"></span>		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#75af00">example</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="basicauth-中间件">BasicAuth() 中间件</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// simulate some private data
</span><span style="color:#75715e"></span><span style="color:#00a8c8">var</span> <span style="color:#75af00">secrets</span> <span style="color:#111">=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
	<span style="color:#d88200">&#34;foo&#34;</span><span style="color:#111">:</span>    <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;email&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;foo@bar.com&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;phone&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;123433&#34;</span><span style="color:#111">},</span>
	<span style="color:#d88200">&#34;austin&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;email&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;austin@example.com&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;phone&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;666&#34;</span><span style="color:#111">},</span>
	<span style="color:#d88200">&#34;lena&#34;</span><span style="color:#111">:</span>   <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;email&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;lena@guapa.com&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;phone&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;523443&#34;</span><span style="color:#111">},</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Group using gin.BasicAuth() middleware
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// gin.Accounts is a shortcut for map[string]string
</span><span style="color:#75715e"></span>	<span style="color:#75af00">authorized</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Group</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/admin&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">BasicAuth</span><span style="color:#111">(</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Accounts</span><span style="color:#111">{</span>
		<span style="color:#d88200">&#34;foo&#34;</span><span style="color:#111">:</span>    <span style="color:#d88200">&#34;bar&#34;</span><span style="color:#111">,</span>
		<span style="color:#d88200">&#34;austin&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;1234&#34;</span><span style="color:#111">,</span>
		<span style="color:#d88200">&#34;lena&#34;</span><span style="color:#111">:</span>   <span style="color:#d88200">&#34;hello2&#34;</span><span style="color:#111">,</span>
		<span style="color:#d88200">&#34;manu&#34;</span><span style="color:#111">:</span>   <span style="color:#d88200">&#34;4321&#34;</span><span style="color:#111">,</span>
	<span style="color:#111">}))</span>

	<span style="color:#75715e">// /admin/secrets endpoint
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// hit &#34;localhost:8080/admin/secrets
</span><span style="color:#75715e"></span>	<span style="color:#75af00">authorized</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/secrets&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// get user, it was set by the BasicAuth middleware
</span><span style="color:#75715e"></span>		<span style="color:#75af00">user</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">MustGet</span><span style="color:#111">(</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">AuthUserKey</span><span style="color:#111">).(</span><span style="color:#00a8c8">string</span><span style="color:#111">)</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">secret</span><span style="color:#111">,</span> <span style="color:#75af00">ok</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">secrets</span><span style="color:#111">[</span><span style="color:#75af00">user</span><span style="color:#111">];</span> <span style="color:#75af00">ok</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;user&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">user</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;secret&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">secret</span><span style="color:#111">})</span>
		<span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
			<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span><span style="color:#d88200">&#34;user&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">user</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;secret&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;NO SECRET :(&#34;</span><span style="color:#111">})</span>
		<span style="color:#111">}</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="goroutines">Goroutines</h3>

<p>当在中间件或处理程序中启动新的 Goroutines 时，你不应该**使用其中的原始上下文，你必须使用只读副本。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/long_async&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// create copy to be used inside the goroutine
</span><span style="color:#75715e"></span>		<span style="color:#75af00">cCp</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Copy</span><span style="color:#111">()</span>
		<span style="color:#00a8c8">go</span> <span style="color:#00a8c8">func</span><span style="color:#111">()</span> <span style="color:#111">{</span>
			<span style="color:#75715e">// simulate a long task with time.Sleep(). 5 seconds
</span><span style="color:#75715e"></span>			<span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Sleep</span><span style="color:#111">(</span><span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">)</span>

			<span style="color:#75715e">// note that you are using the copied context &#34;cCp&#34;, IMPORTANT
</span><span style="color:#75715e"></span>			<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Done! in path &#34;</span> <span style="color:#f92672">+</span> <span style="color:#75af00">cCp</span><span style="color:#111">.</span><span style="color:#75af00">Request</span><span style="color:#111">.</span><span style="color:#75af00">URL</span><span style="color:#111">.</span><span style="color:#75af00">Path</span><span style="color:#111">)</span>
		<span style="color:#111">}()</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/long_sync&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// simulate a long task with time.Sleep(). 5 seconds
</span><span style="color:#75715e"></span>		<span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Sleep</span><span style="color:#111">(</span><span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">)</span>

		<span style="color:#75715e">// since we are NOT using a goroutine, we do not have to copy the context
</span><span style="color:#75715e"></span>		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Done! in path &#34;</span> <span style="color:#f92672">+</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Request</span><span style="color:#111">.</span><span style="color:#75af00">URL</span><span style="color:#111">.</span><span style="color:#75af00">Path</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and serve on 0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="自定义-http-配置">自定义 HTTP 配置</h3>

<p>直接使用<code>http.ListenAndServe()</code>，如下所示：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">ListenAndServe</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">router</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>or</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75af00">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Server</span><span style="color:#111">{</span>
		<span style="color:#75af00">Addr</span><span style="color:#111">:</span>           <span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">,</span>
		<span style="color:#75af00">Handler</span><span style="color:#111">:</span>        <span style="color:#75af00">router</span><span style="color:#111">,</span>
		<span style="color:#75af00">ReadTimeout</span><span style="color:#111">:</span>    <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">,</span>
		<span style="color:#75af00">WriteTimeout</span><span style="color:#111">:</span>   <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">,</span>
		<span style="color:#75af00">MaxHeaderBytes</span><span style="color:#111">:</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">20</span><span style="color:#111">,</span>
	<span style="color:#111">}</span>
	<span style="color:#75af00">s</span><span style="color:#111">.</span><span style="color:#75af00">ListenAndServe</span><span style="color:#111">()</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="let-s-encrypt-支持">Let&rsquo;s Encrypt 支持</h3>

<p>一行代码支持 LetsEncrypt HTTPS示例。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;log&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/autotls&#34;</span>
	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Ping handler
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/ping&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;pong&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Fatal</span><span style="color:#111">(</span><span style="color:#75af00">autotls</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#75af00">r</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;example1.com&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;example2.com&#34;</span><span style="color:#111">))</span>
<span style="color:#111">}</span></code></pre></div>
<p>autocert使用示例。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;log&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/autotls&#34;</span>
	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
	<span style="color:#d88200">&#34;golang.org/x/crypto/acme/autocert&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>

	<span style="color:#75715e">// Ping handler
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/ping&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;pong&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">m</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">autocert</span><span style="color:#111">.</span><span style="color:#75af00">Manager</span><span style="color:#111">{</span>
		<span style="color:#75af00">Prompt</span><span style="color:#111">:</span>     <span style="color:#75af00">autocert</span><span style="color:#111">.</span><span style="color:#75af00">AcceptTOS</span><span style="color:#111">,</span>
		<span style="color:#75af00">HostPolicy</span><span style="color:#111">:</span> <span style="color:#75af00">autocert</span><span style="color:#111">.</span><span style="color:#75af00">HostWhitelist</span><span style="color:#111">(</span><span style="color:#d88200">&#34;example1.com&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;example2.com&#34;</span><span style="color:#111">),</span>
		<span style="color:#75af00">Cache</span><span style="color:#111">:</span>      <span style="color:#75af00">autocert</span><span style="color:#111">.</span><span style="color:#75af00">DirCache</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/var/www/.cache&#34;</span><span style="color:#111">),</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Fatal</span><span style="color:#111">(</span><span style="color:#75af00">autotls</span><span style="color:#111">.</span><span style="color:#75af00">RunWithManager</span><span style="color:#111">(</span><span style="color:#75af00">r</span><span style="color:#111">,</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">m</span><span style="color:#111">))</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="使用-gin-运行多个服务">使用 Gin 运行多个服务</h3>

<p>请参阅<a href="https://github.com/gin-gonic/gin/issues/346">问题</a>并尝试以下示例：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;log&#34;</span>
	<span style="color:#d88200">&#34;net/http&#34;</span>
	<span style="color:#d88200">&#34;time&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
	<span style="color:#d88200">&#34;golang.org/x/sync/errgroup&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">var</span> <span style="color:#111">(</span>
	<span style="color:#75af00">g</span> <span style="color:#75af00">errgroup</span><span style="color:#111">.</span><span style="color:#75af00">Group</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">router01</span><span style="color:#111">()</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Handler</span> <span style="color:#111">{</span>
	<span style="color:#75af00">e</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">()</span>
	<span style="color:#75af00">e</span><span style="color:#111">.</span><span style="color:#75af00">Use</span><span style="color:#111">(</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Recovery</span><span style="color:#111">())</span>
	<span style="color:#75af00">e</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span>
			<span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span>
			<span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
				<span style="color:#d88200">&#34;code&#34;</span><span style="color:#111">:</span>  <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span>
				<span style="color:#d88200">&#34;error&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Welcome server 01&#34;</span><span style="color:#111">,</span>
			<span style="color:#111">},</span>
		<span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#00a8c8">return</span> <span style="color:#75af00">e</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">router02</span><span style="color:#111">()</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Handler</span> <span style="color:#111">{</span>
	<span style="color:#75af00">e</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">()</span>
	<span style="color:#75af00">e</span><span style="color:#111">.</span><span style="color:#75af00">Use</span><span style="color:#111">(</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Recovery</span><span style="color:#111">())</span>
	<span style="color:#75af00">e</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span>
			<span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span>
			<span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
				<span style="color:#d88200">&#34;code&#34;</span><span style="color:#111">:</span>  <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span>
				<span style="color:#d88200">&#34;error&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Welcome server 02&#34;</span><span style="color:#111">,</span>
			<span style="color:#111">},</span>
		<span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#00a8c8">return</span> <span style="color:#75af00">e</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">server01</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Server</span><span style="color:#111">{</span>
		<span style="color:#75af00">Addr</span><span style="color:#111">:</span>         <span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">,</span>
		<span style="color:#75af00">Handler</span><span style="color:#111">:</span>      <span style="color:#75af00">router01</span><span style="color:#111">(),</span>
		<span style="color:#75af00">ReadTimeout</span><span style="color:#111">:</span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">,</span>
		<span style="color:#75af00">WriteTimeout</span><span style="color:#111">:</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">,</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">server02</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Server</span><span style="color:#111">{</span>
		<span style="color:#75af00">Addr</span><span style="color:#111">:</span>         <span style="color:#d88200">&#34;:8081&#34;</span><span style="color:#111">,</span>
		<span style="color:#75af00">Handler</span><span style="color:#111">:</span>      <span style="color:#75af00">router02</span><span style="color:#111">(),</span>
		<span style="color:#75af00">ReadTimeout</span><span style="color:#111">:</span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">,</span>
		<span style="color:#75af00">WriteTimeout</span><span style="color:#111">:</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">,</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">g</span><span style="color:#111">.</span><span style="color:#75af00">Go</span><span style="color:#111">(</span><span style="color:#00a8c8">func</span><span style="color:#111">()</span> <span style="color:#00a8c8">error</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">return</span> <span style="color:#75af00">server01</span><span style="color:#111">.</span><span style="color:#75af00">ListenAndServe</span><span style="color:#111">()</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">g</span><span style="color:#111">.</span><span style="color:#75af00">Go</span><span style="color:#111">(</span><span style="color:#00a8c8">func</span><span style="color:#111">()</span> <span style="color:#00a8c8">error</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">return</span> <span style="color:#75af00">server02</span><span style="color:#111">.</span><span style="color:#75af00">ListenAndServe</span><span style="color:#111">()</span>
	<span style="color:#111">})</span>

	<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">g</span><span style="color:#111">.</span><span style="color:#75af00">Wait</span><span style="color:#111">();</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Fatal</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="优雅重启或停止">优雅重启或停止</h3>

<p>您想要优雅地重启或停止您的Web服务器吗？
有一些方法可以做到这一点。</p>

<p>我们可以使用<a href="https://github.com/fvbock/endless">fvbock/endless</a>来替换默认的<code>ListenAndServe</code>。 有关更多详细信息，请参阅问题<a href="https://github.com/gin-gonic/gin/issues/296">＃296</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">handler</span><span style="color:#111">)</span>
<span style="color:#75715e">// [...]
</span><span style="color:#75715e"></span><span style="color:#75af00">endless</span><span style="color:#111">.</span><span style="color:#75af00">ListenAndServe</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:4242&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">router</span><span style="color:#111">)</span></code></pre></div>
<p>替代方案：</p>

<ul>
<li><a href="https://github.com/braintree/manners">manners</a>：礼貌的Go HTTP服务器，可以正常关闭。</li>
<li><a href="https://github.com/tylerb/graceful">graceful</a>：Graceful是一个Go包，可以正常关闭http.Handler服务器。</li>
<li><a href="https://github.com/facebookgo/grace">grace</a>：Go服务器的平滑重启和零停机时间部署。</li>
</ul>

<p>如果您使用的是Go 1.8，可以考虑使用http.Server内置<a href="https://golang.org/pkg/net/http/#Server.Shutdown">Shutdown()</a>方法进行正常关机。 请参阅gin的完整<a href="./examples /graceful-shutdown">graceful-shutdown</a>示例。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// +build go1.8
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;context&#34;</span>
	<span style="color:#d88200">&#34;log&#34;</span>
	<span style="color:#d88200">&#34;net/http&#34;</span>
	<span style="color:#d88200">&#34;os&#34;</span>
	<span style="color:#d88200">&#34;os/signal&#34;</span>
	<span style="color:#d88200">&#34;time&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Sleep</span><span style="color:#111">(</span><span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">)</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Welcome Gin Server&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">srv</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Server</span><span style="color:#111">{</span>
		<span style="color:#75af00">Addr</span><span style="color:#111">:</span>    <span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">,</span>
		<span style="color:#75af00">Handler</span><span style="color:#111">:</span> <span style="color:#75af00">router</span><span style="color:#111">,</span>
	<span style="color:#111">}</span>

	<span style="color:#00a8c8">go</span> <span style="color:#00a8c8">func</span><span style="color:#111">()</span> <span style="color:#111">{</span>
		<span style="color:#75715e">// service connections
</span><span style="color:#75715e"></span>		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">srv</span><span style="color:#111">.</span><span style="color:#75af00">ListenAndServe</span><span style="color:#111">();</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">ErrServerClosed</span> <span style="color:#111">{</span>
			<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Fatalf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;listen: %s\n&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">err</span><span style="color:#111">)</span>
		<span style="color:#111">}</span>
	<span style="color:#111">}()</span>

	<span style="color:#75715e">// Wait for interrupt signal to gracefully shutdown the server with
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// a timeout of 5 seconds.
</span><span style="color:#75715e"></span>	<span style="color:#75af00">quit</span> <span style="color:#f92672">:=</span> <span style="color:#111">make</span><span style="color:#111">(</span><span style="color:#00a8c8">chan</span> <span style="color:#75af00">os</span><span style="color:#111">.</span><span style="color:#75af00">Signal</span><span style="color:#111">)</span>
	<span style="color:#75af00">signal</span><span style="color:#111">.</span><span style="color:#75af00">Notify</span><span style="color:#111">(</span><span style="color:#75af00">quit</span><span style="color:#111">,</span> <span style="color:#75af00">os</span><span style="color:#111">.</span><span style="color:#75af00">Interrupt</span><span style="color:#111">)</span>
	<span style="color:#f92672">&lt;-</span><span style="color:#75af00">quit</span>
	<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Shutdown Server ...&#34;</span><span style="color:#111">)</span>

	<span style="color:#75af00">ctx</span><span style="color:#111">,</span> <span style="color:#75af00">cancel</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">context</span><span style="color:#111">.</span><span style="color:#75af00">WithTimeout</span><span style="color:#111">(</span><span style="color:#75af00">context</span><span style="color:#111">.</span><span style="color:#75af00">Background</span><span style="color:#111">(),</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">*</span><span style="color:#75af00">time</span><span style="color:#111">.</span><span style="color:#75af00">Second</span><span style="color:#111">)</span>
	<span style="color:#00a8c8">defer</span> <span style="color:#75af00">cancel</span><span style="color:#111">()</span>
	<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">srv</span><span style="color:#111">.</span><span style="color:#75af00">Shutdown</span><span style="color:#111">(</span><span style="color:#75af00">ctx</span><span style="color:#111">);</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Fatal</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Server Shutdown:&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">err</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>
	<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Server exiting&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="使用模板构建单个二进制文件">使用模板构建单个二进制文件</h3>

<p>您可以使用[go-assets]将服务器打包为包含模板的单个二进制可执行文件。</p>

<p>[go-assets]：https：//github.com/jessevdk/go-assets</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">()</span>

	<span style="color:#75af00">t</span><span style="color:#111">,</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">loadTemplate</span><span style="color:#111">()</span>
	<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
		<span style="color:#111">panic</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">SetHTMLTemplate</span><span style="color:#111">(</span><span style="color:#75af00">t</span><span style="color:#111">)</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">HTML</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;/html/index.tmpl&#34;</span><span style="color:#111">,</span><span style="color:#00a8c8">nil</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span>

<span style="color:#75715e">// loadTemplate loads templates embedded by go-assets-builder
</span><span style="color:#75715e"></span><span style="color:#00a8c8">func</span> <span style="color:#75af00">loadTemplate</span><span style="color:#111">()</span> <span style="color:#111">(</span><span style="color:#f92672">*</span><span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">Template</span><span style="color:#111">,</span> <span style="color:#00a8c8">error</span><span style="color:#111">)</span> <span style="color:#111">{</span>
	<span style="color:#75af00">t</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">(</span><span style="color:#d88200">&#34;&#34;</span><span style="color:#111">)</span>
	<span style="color:#00a8c8">for</span> <span style="color:#75af00">name</span><span style="color:#111">,</span> <span style="color:#75af00">file</span> <span style="color:#f92672">:=</span> <span style="color:#00a8c8">range</span> <span style="color:#75af00">Assets</span><span style="color:#111">.</span><span style="color:#75af00">Files</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">file</span><span style="color:#111">.</span><span style="color:#75af00">IsDir</span><span style="color:#111">()</span> <span style="color:#f92672">||</span> <span style="color:#111">!</span><span style="color:#75af00">strings</span><span style="color:#111">.</span><span style="color:#75af00">HasSuffix</span><span style="color:#111">(</span><span style="color:#75af00">name</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;.tmpl&#34;</span><span style="color:#111">)</span> <span style="color:#111">{</span>
			<span style="color:#00a8c8">continue</span>
		<span style="color:#111">}</span>
		<span style="color:#75af00">h</span><span style="color:#111">,</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">ioutil</span><span style="color:#111">.</span><span style="color:#75af00">ReadAll</span><span style="color:#111">(</span><span style="color:#75af00">file</span><span style="color:#111">)</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#00a8c8">return</span> <span style="color:#00a8c8">nil</span><span style="color:#111">,</span> <span style="color:#75af00">err</span>
		<span style="color:#111">}</span>
		<span style="color:#75af00">t</span><span style="color:#111">,</span> <span style="color:#75af00">err</span> <span style="color:#111">=</span> <span style="color:#75af00">t</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">(</span><span style="color:#75af00">name</span><span style="color:#111">).</span><span style="color:#75af00">Parse</span><span style="color:#111">(</span><span style="color:#111">string</span><span style="color:#111">(</span><span style="color:#75af00">h</span><span style="color:#111">))</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#00a8c8">return</span> <span style="color:#00a8c8">nil</span><span style="color:#111">,</span> <span style="color:#75af00">err</span>
		<span style="color:#111">}</span>
	<span style="color:#111">}</span>
	<span style="color:#00a8c8">return</span> <span style="color:#75af00">t</span><span style="color:#111">,</span> <span style="color:#00a8c8">nil</span>
<span style="color:#111">}</span></code></pre></div>
<p>请参阅<code>examples/assets-in-binary</code>目录中的完整示例。</p>

<h3 id="表单数据绑定到自定义结构体">表单数据绑定到自定义结构体</h3>

<p>以下示例使用自定义结构：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">type</span> <span style="color:#75af00">StructA</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">FieldA</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;field_a&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">StructB</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">NestedStruct</span> <span style="color:#75af00">StructA</span>
    <span style="color:#75af00">FieldB</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;field_b&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">StructC</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">NestedStructPointer</span> <span style="color:#f92672">*</span><span style="color:#75af00">StructA</span>
    <span style="color:#75af00">FieldC</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;field_c&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">StructD</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">NestedAnonyStruct</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
        <span style="color:#75af00">FieldX</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;field_x&#34;`</span>
    <span style="color:#111">}</span>
    <span style="color:#75af00">FieldD</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`form:&#34;field_d&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">GetDataB</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">var</span> <span style="color:#75af00">b</span> <span style="color:#75af00">StructB</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Bind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">b</span><span style="color:#111">)</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
        <span style="color:#d88200">&#34;a&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">b</span><span style="color:#111">.</span><span style="color:#75af00">NestedStruct</span><span style="color:#111">,</span>
        <span style="color:#d88200">&#34;b&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">b</span><span style="color:#111">.</span><span style="color:#75af00">FieldB</span><span style="color:#111">,</span>
    <span style="color:#111">})</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">GetDataC</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">var</span> <span style="color:#75af00">b</span> <span style="color:#75af00">StructC</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Bind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">b</span><span style="color:#111">)</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
        <span style="color:#d88200">&#34;a&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">b</span><span style="color:#111">.</span><span style="color:#75af00">NestedStructPointer</span><span style="color:#111">,</span>
        <span style="color:#d88200">&#34;c&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">b</span><span style="color:#111">.</span><span style="color:#75af00">FieldC</span><span style="color:#111">,</span>
    <span style="color:#111">})</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">GetDataD</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">var</span> <span style="color:#75af00">b</span> <span style="color:#75af00">StructD</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Bind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">b</span><span style="color:#111">)</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
        <span style="color:#d88200">&#34;x&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">b</span><span style="color:#111">.</span><span style="color:#75af00">NestedAnonyStruct</span><span style="color:#111">,</span>
        <span style="color:#d88200">&#34;d&#34;</span><span style="color:#111">:</span> <span style="color:#75af00">b</span><span style="color:#111">.</span><span style="color:#75af00">FieldD</span><span style="color:#111">,</span>
    <span style="color:#111">})</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
    <span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
    <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/getb&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">GetDataB</span><span style="color:#111">)</span>
    <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/getc&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">GetDataC</span><span style="color:#111">)</span>
    <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/getd&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">GetDataD</span><span style="color:#111">)</span>

    <span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">()</span>
<span style="color:#111">}</span></code></pre></div>
<p>使用命令<code>curl</code>命令结果：</p>

<pre><code>$ curl &quot;http://localhost:8080/getb?field_a=hello&amp;field_b=world&quot;
{&quot;a&quot;:{&quot;FieldA&quot;:&quot;hello&quot;},&quot;b&quot;:&quot;world&quot;}
$ curl &quot;http://localhost:8080/getc?field_a=hello&amp;field_c=world&quot;
{&quot;a&quot;:{&quot;FieldA&quot;:&quot;hello&quot;},&quot;c&quot;:&quot;world&quot;}
$ curl &quot;http://localhost:8080/getd?field_x=hello&amp;field_d=world&quot;
{&quot;d&quot;:&quot;world&quot;,&quot;x&quot;:{&quot;FieldX&quot;:&quot;hello&quot;}}
</code></pre>

<p><strong>注意</strong>:不支持以下样式结构：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">type</span> <span style="color:#75af00">StructX</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">X</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{}</span> <span style="color:#d88200">`form:&#34;name_x&#34;`</span> <span style="color:#75715e">// HERE have form
</span><span style="color:#75715e"></span><span style="color:#111">}</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">StructY</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">Y</span> <span style="color:#75af00">StructX</span> <span style="color:#d88200">`form:&#34;name_y&#34;`</span> <span style="color:#75715e">// HERE have form
</span><span style="color:#75715e"></span><span style="color:#111">}</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">StructZ</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
    <span style="color:#75af00">Z</span> <span style="color:#f92672">*</span><span style="color:#75af00">StructZ</span> <span style="color:#d88200">`form:&#34;name_z&#34;`</span> <span style="color:#75715e">// HERE have form
</span><span style="color:#75715e"></span><span style="color:#111">}</span></code></pre></div>
<p>总之，只支持现在没有<code>form</code>的嵌套自定义结构。</p>

<h3 id="将request-body绑定到不同的结构体中">将request body绑定到不同的结构体中</h3>

<p>一般通过调用<code>c.Request.Body</code>方法绑定数据，但不能多次调用这个方法。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">type</span> <span style="color:#75af00">formA</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
  <span style="color:#75af00">Foo</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`json:&#34;foo&#34; xml:&#34;foo&#34; binding:&#34;required&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">type</span> <span style="color:#75af00">formB</span> <span style="color:#00a8c8">struct</span> <span style="color:#111">{</span>
  <span style="color:#75af00">Bar</span> <span style="color:#00a8c8">string</span> <span style="color:#d88200">`json:&#34;bar&#34; xml:&#34;bar&#34; binding:&#34;required&#34;`</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">SomeHandler</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
  <span style="color:#75af00">objA</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">formA</span><span style="color:#111">{}</span>
  <span style="color:#75af00">objB</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">formB</span><span style="color:#111">{}</span>
  <span style="color:#75715e">// This c.ShouldBind consumes c.Request.Body and it cannot be reused.
</span><span style="color:#75715e"></span>  <span style="color:#00a8c8">if</span> <span style="color:#75af00">errA</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">objA</span><span style="color:#111">);</span> <span style="color:#75af00">errA</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">`the body should be formA`</span><span style="color:#111">)</span>
  <span style="color:#75715e">// Always an error is occurred by this because c.Request.Body is EOF now.
</span><span style="color:#75715e"></span>  <span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#00a8c8">if</span> <span style="color:#75af00">errB</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBind</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">objB</span><span style="color:#111">);</span> <span style="color:#75af00">errB</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">`the body should be formB`</span><span style="color:#111">)</span>
  <span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
    <span style="color:#f92672">...</span>
  <span style="color:#111">}</span>
<span style="color:#111">}</span></code></pre></div>
<p>为此，要想多次绑定，需要使用<code>c.ShouldBindBodyWith</code>.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">SomeHandler</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
  <span style="color:#75af00">objA</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">formA</span><span style="color:#111">{}</span>
  <span style="color:#75af00">objB</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">formB</span><span style="color:#111">{}</span>
  <span style="color:#75715e">// This reads c.Request.Body and stores the result into the context.
</span><span style="color:#75715e"></span>  <span style="color:#00a8c8">if</span> <span style="color:#75af00">errA</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindBodyWith</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">objA</span><span style="color:#111">,</span> <span style="color:#75af00">binding</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">);</span> <span style="color:#75af00">errA</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">`the body should be formA`</span><span style="color:#111">)</span>
  <span style="color:#75715e">// At this time, it reuses body stored in the context.
</span><span style="color:#75715e"></span>  <span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#00a8c8">if</span> <span style="color:#75af00">errB</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindBodyWith</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">objB</span><span style="color:#111">,</span> <span style="color:#75af00">binding</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">);</span> <span style="color:#75af00">errB</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">`the body should be formB JSON`</span><span style="color:#111">)</span>
  <span style="color:#75715e">// And it can accepts other formats
</span><span style="color:#75715e"></span>  <span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#00a8c8">if</span> <span style="color:#75af00">errB2</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">ShouldBindBodyWith</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#75af00">objB</span><span style="color:#111">,</span> <span style="color:#75af00">binding</span><span style="color:#111">.</span><span style="color:#75af00">XML</span><span style="color:#111">);</span> <span style="color:#75af00">errB2</span> <span style="color:#f92672">==</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
    <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">`the body should be formB XML`</span><span style="color:#111">)</span>
  <span style="color:#111">}</span> <span style="color:#00a8c8">else</span> <span style="color:#111">{</span>
    <span style="color:#f92672">...</span>
  <span style="color:#111">}</span>
<span style="color:#111">}</span></code></pre></div>
<p>*<code>c.ShouldBindBodyWith</code>会在绑定之前将body存储到上下文中。 这会
对性能造成轻微影响，如果调用一次就能完成绑定的话，那就不要用这个方法。
*只有某些格式需要此功能 ，如“JSON”，“XML”，“MsgPack”，
<code>ProtoBuf</code>。 对于其他格式，如<code>Query</code>，<code>Form</code>，<code>FormPost</code>，<code>FormMultipart</code>，
可以多次调用<code>c.ShouldBind()</code>而不会造成任任何性能损失（见<a href="https://github.com/gin-gonic/gin/pull/1341">＃1341</a>）。</p>

<h3 id="http2-server-推送">http2 server 推送</h3>

<p>http.Pusher仅支持** go1.8 + **。 有关详细信息，请参阅<a href="https://blog.golang.org/h2push">golang blog</a>。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;html/template&#34;</span>
	<span style="color:#d88200">&#34;log&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">var</span> <span style="color:#75af00">html</span> <span style="color:#111">=</span> <span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">Must</span><span style="color:#111">(</span><span style="color:#75af00">template</span><span style="color:#111">.</span><span style="color:#75af00">New</span><span style="color:#111">(</span><span style="color:#d88200">&#34;https&#34;</span><span style="color:#111">).</span><span style="color:#75af00">Parse</span><span style="color:#111">(</span><span style="color:#d88200">`
</span><span style="color:#d88200">&lt;html&gt;
</span><span style="color:#d88200">&lt;head&gt;
</span><span style="color:#d88200">  &lt;title&gt;Https Test&lt;/title&gt;
</span><span style="color:#d88200">  &lt;script src=&#34;/assets/app.js&#34;&gt;&lt;/script&gt;
</span><span style="color:#d88200">&lt;/head&gt;
</span><span style="color:#d88200">&lt;body&gt;
</span><span style="color:#d88200">  &lt;h1 style=&#34;color:red;&#34;&gt;Welcome, Ginner!&lt;/h1&gt;
</span><span style="color:#d88200">&lt;/body&gt;
</span><span style="color:#d88200">&lt;/html&gt;
</span><span style="color:#d88200">`</span><span style="color:#111">))</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Static</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/assets&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;./assets&#34;</span><span style="color:#111">)</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">SetHTMLTemplate</span><span style="color:#111">(</span><span style="color:#75af00">html</span><span style="color:#111">)</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#00a8c8">if</span> <span style="color:#75af00">pusher</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">Writer</span><span style="color:#111">.</span><span style="color:#75af00">Pusher</span><span style="color:#111">();</span> <span style="color:#75af00">pusher</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
			<span style="color:#75715e">// use pusher.Push() to do server push
</span><span style="color:#75715e"></span>			<span style="color:#00a8c8">if</span> <span style="color:#75af00">err</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">pusher</span><span style="color:#111">.</span><span style="color:#75af00">Push</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/assets/app.js&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">nil</span><span style="color:#111">);</span> <span style="color:#75af00">err</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">nil</span> <span style="color:#111">{</span>
				<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Printf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;Failed to push: %v&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">err</span><span style="color:#111">)</span>
			<span style="color:#111">}</span>
		<span style="color:#111">}</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">HTML</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;https&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">H</span><span style="color:#111">{</span>
			<span style="color:#d88200">&#34;status&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;success&#34;</span><span style="color:#111">,</span>
		<span style="color:#111">})</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and Server in https://127.0.0.1:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">RunTLS</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;./testdata/server.pem&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;./testdata/server.key&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<h3 id="定义路由日志的格式">定义路由日志的格式</h3>

<p>默认的路由日志格式：</p>

<pre><code>[GIN-debug] POST   /foo                      --&gt; main.main.func1 (3 handlers)
[GIN-debug] GET    /bar                      --&gt; main.main.func2 (3 handlers)
[GIN-debug] GET    /status                   --&gt; main.main.func3 (3 handlers)
</code></pre>

<p>如果要以指的格式（例如JSON，Key Values或其他格式）记录信息，则可以使用<code>gin.DebugPrintRouteFunc</code>指定格式。
在下面的示例中，我们使用标准日志包记录所有路由，但您可以使用其他满足需求的日志工具。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;log&#34;</span>
	<span style="color:#d88200">&#34;net/http&#34;</span>

	<span style="color:#d88200">&#34;github.com/gin-gonic/gin&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">DebugPrintRouteFunc</span> <span style="color:#111">=</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">httpMethod</span><span style="color:#111">,</span> <span style="color:#75af00">absolutePath</span><span style="color:#111">,</span> <span style="color:#75af00">handlerName</span> <span style="color:#00a8c8">string</span><span style="color:#111">,</span> <span style="color:#75af00">nuHandlers</span> <span style="color:#00a8c8">int</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">log</span><span style="color:#111">.</span><span style="color:#75af00">Printf</span><span style="color:#111">(</span><span style="color:#d88200">&#34;endpoint %v %v %v %v\n&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">httpMethod</span><span style="color:#111">,</span> <span style="color:#75af00">absolutePath</span><span style="color:#111">,</span> <span style="color:#75af00">handlerName</span><span style="color:#111">,</span> <span style="color:#75af00">nuHandlers</span><span style="color:#111">)</span>
	<span style="color:#111">}</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">POST</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/foo&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;foo&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/bar&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;bar&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/status&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">JSON</span><span style="color:#111">(</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">StatusOK</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;ok&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>

	<span style="color:#75715e">// Listen and Server in http://0.0.0.0:8080
</span><span style="color:#75715e"></span>	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">()</span>
<span style="color:#111">}</span></code></pre></div>
<h2 id="测试">测试</h2>

<p>HTTP测试首选<code>net/http/httptest</code>包。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">setupRouter</span><span style="color:#111">()</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Engine</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Default</span><span style="color:#111">()</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">GET</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/ping&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">c</span> <span style="color:#f92672">*</span><span style="color:#75af00">gin</span><span style="color:#111">.</span><span style="color:#75af00">Context</span><span style="color:#111">)</span> <span style="color:#111">{</span>
		<span style="color:#75af00">c</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">(</span><span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;pong&#34;</span><span style="color:#111">)</span>
	<span style="color:#111">})</span>
	<span style="color:#00a8c8">return</span> <span style="color:#75af00">r</span>
<span style="color:#111">}</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span><span style="color:#111">()</span> <span style="color:#111">{</span>
	<span style="color:#75af00">r</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">setupRouter</span><span style="color:#111">()</span>
	<span style="color:#75af00">r</span><span style="color:#111">.</span><span style="color:#75af00">Run</span><span style="color:#111">(</span><span style="color:#d88200">&#34;:8080&#34;</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>
<p>上面这段代码的测试用例：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#75af00">main</span>

<span style="color:#f92672">import</span> <span style="color:#111">(</span>
	<span style="color:#d88200">&#34;net/http&#34;</span>
	<span style="color:#d88200">&#34;net/http/httptest&#34;</span>
	<span style="color:#d88200">&#34;testing&#34;</span>

	<span style="color:#d88200">&#34;github.com/stretchr/testify/assert&#34;</span>
<span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">TestPingRoute</span><span style="color:#111">(</span><span style="color:#75af00">t</span> <span style="color:#f92672">*</span><span style="color:#75af00">testing</span><span style="color:#111">.</span><span style="color:#75af00">T</span><span style="color:#111">)</span> <span style="color:#111">{</span>
	<span style="color:#75af00">router</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">setupRouter</span><span style="color:#111">()</span>

	<span style="color:#75af00">w</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">httptest</span><span style="color:#111">.</span><span style="color:#75af00">NewRecorder</span><span style="color:#111">()</span>
	<span style="color:#75af00">req</span><span style="color:#111">,</span> <span style="color:#75af00">_</span> <span style="color:#f92672">:=</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">NewRequest</span><span style="color:#111">(</span><span style="color:#d88200">&#34;GET&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;/ping&#34;</span><span style="color:#111">,</span> <span style="color:#00a8c8">nil</span><span style="color:#111">)</span>
	<span style="color:#75af00">router</span><span style="color:#111">.</span><span style="color:#75af00">ServeHTTP</span><span style="color:#111">(</span><span style="color:#75af00">w</span><span style="color:#111">,</span> <span style="color:#75af00">req</span><span style="color:#111">)</span>

	<span style="color:#75af00">assert</span><span style="color:#111">.</span><span style="color:#75af00">Equal</span><span style="color:#111">(</span><span style="color:#75af00">t</span><span style="color:#111">,</span> <span style="color:#ae81ff">200</span><span style="color:#111">,</span> <span style="color:#75af00">w</span><span style="color:#111">.</span><span style="color:#75af00">Code</span><span style="color:#111">)</span>
	<span style="color:#75af00">assert</span><span style="color:#111">.</span><span style="color:#75af00">Equal</span><span style="color:#111">(</span><span style="color:#75af00">t</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;pong&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">w</span><span style="color:#111">.</span><span style="color:#75af00">Body</span><span style="color:#111">.</span><span style="color:#75af00">String</span><span style="color:#111">())</span>
<span style="color:#111">}</span></code></pre></div>
<h2 id="用户">用户</h2>

<p>使用<a href="https://github.com/gin-gonic/gin">Gin</a>框架的著名项目。</p>

<ul>
<li><a href="https://github.com/drone/drone">drone</a>：用Go编写的基于docker的持续集成平台。</li>
<li><a href="https://github.com/appleboy/gorush">gorush</a>：用Go编写的推送通知服务。</li>
<li><a href="https://github.com/fnproject/fn">fnproject</a>：容器驱动、云无关的无服务器平台。</li>
<li><a href="https://github.com/photoprism/photoprism">photoprism</a>: 用Go编写的基于TensorFlow的个人相册管理系统.</li>
</ul>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/faq/" title="FAQ"> <i class="fa fa-chevron-left"></i><label>FAQ</label></a>
    <a class="nav nav-next" href="/introduction/" title="Introduction" style="margin-right: 0px;"><label>Introduction</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="https://github.com/gin-gonic/website/edit/master/content/cn/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
<script src="/js/tabs.js"></script>
<script>
  [].slice.call(document.querySelectorAll('.tab-container'))
    .forEach(function(el) {
      initializeTabs(el);
    });
</script>


  </body>
</html>